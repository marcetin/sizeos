webpackJsonp([21],{176:function(t,e){t.exports=function(t,e,n,i,o){var r,a=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(r=t,a=t.default);var l="function"==typeof a?a.options:a;e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns),i&&(l._scopeId=i);var u;if(o?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=u):n&&(u=n),u){var c=l.functional,p=c?l.render:l.beforeCreate;c?l.render=function(t,e){return u.call(e),p(t,e)}:l.beforeCreate=p?[].concat(p,u):[u]}return{esModule:r,exports:a,options:l}}},177:function(t,e,n){var i=n(176)(n(184),null,null,null,null);t.exports=i.exports},178:function(t,e,n){var i=n(176)(n(185),null,null,null,null);t.exports=i.exports},179:function(t,e,n){var i=n(176)(n(182),null,null,null,null);t.exports=i.exports},180:function(t,e,n){var i=n(176)(n(183),null,null,null,null);t.exports=i.exports},182:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(93).then(function(){var e=[n(200)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Content:i}},183:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(10).then(function(){var e=[n(197)];t.apply(null,e)}.bind(this)).catch(n.oe)},o=function(t){return n.e(78).then(function(){var e=[n(201)];t.apply(null,e)}.bind(this)).catch(n.oe)},r=function(t){return n.e(6).then(function(){var e=[n(198)];t.apply(null,e)}.bind(this)).catch(n.oe)},a=function(t){return n.e(8).then(function(){var e=[n(199)];t.apply(null,e)}.bind(this)).catch(n.oe)},s=function(t){return n.e(84).then(function(){var e=[n(202)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Header:i,SecondHeader:o,HeaderLink:r,HeaderTitle:a,SimpleHeader:s,Title:a}},184:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(91).then(function(){var e=[n(203)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Icon:i}},185:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(77).then(function(){var e=[n(205)];t.apply(null,e)}.bind(this)).catch(n.oe)},o=function(t){return n.e(95).then(function(){var e=[n(206)];t.apply(null,e)}.bind(this)).catch(n.oe)},r=function(t){return n.e(70).then(function(){var e=[n(204)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Button:i,CDButton:o,ButtonGroup:r}},186:function(t,e,n){var i=n(176)(n(188),null,null,null,null);t.exports=i.exports},187:function(t,e,n){var i=n(176)(n(189),null,null,null,null);t.exports=i.exports},188:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(79).then(function(){var e=[n(207)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Posts:i}},189:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(76).then(function(){var e=[n(210)];t.apply(null,e)}.bind(this)).catch(n.oe)},o=function(t){return n.e(89).then(function(){var e=[n(209)];t.apply(null,e)}.bind(this)).catch(n.oe)},r=function(t){return n.e(90).then(function(){var e=[n(208)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={List:i,ListItem:o,ListInput:r}},190:function(t,e,n){var i=n(176)(n(191),null,null,null,null);t.exports=i.exports},191:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(80).then(function(){var e=[n(213)];t.apply(null,e)}.bind(this)).catch(n.oe)},o=function(t){return n.e(81).then(function(){var e=[n(215)];t.apply(null,e)}.bind(this)).catch(n.oe)},r=function(t){return n.e(96).then(function(){var e=[n(214)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Footer:i,SecondFooter:o,FooterItem:r,Item:r}},192:function(t,e,n){var i=n(176)(n(193),null,null,null,null);t.exports=i.exports},193:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(7).then(function(){var e=[n(211)];t.apply(null,e)}.bind(this)).catch(n.oe)},o=function(t){return n.e(9).then(function(){var e=[n(212)];t.apply(null,e)}.bind(this)).catch(n.oe)},r=function(t){return n.e(94).then(function(){var e=[n(216)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Column:i,ColumnItem:o,ColumnSort:r}},217:function(t,e,n){var i=n(176)(n(218),null,null,null,null);t.exports=i.exports},218:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(71).then(function(){var e=[n(228)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Paginate:i}},223:function(t,e,n){var i=n(176)(n(225),null,null,null,null);t.exports=i.exports},224:function(t,e,n){var i=n(176)(n(226),null,null,null,null);t.exports=i.exports},225:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(62).then(function(){var e=[n(240)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Datetimer:i}},226:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(66).then(function(){var e=[n(241)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Popup:i}},413:function(t,e,n){var i=n(176)(n(746),n(515),null,null,null);t.exports=i.exports},515:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[n("page-header",{slot:"header"},[n("header-title",[t._v(t._s(t.$t("admin.productsalerank.title")))]),t._v(" "),n("header-link",{attrs:{isback:!0,left:!0}},[n("icon",{staticClass:"font08",attrs:{icon:"arrowleft"}}),t._v(t._s(t.$t("default.back")))],1),t._v(" "),n("header-link",{on:{linkClick:function(e){t.searchshow=!0}}},[n("icon",{staticClass:"font08",attrs:{icon:"search"}})],1)],1),t._v(" "),n("page-content",{attrs:{ispadding:!0}},[n("list",{attrs:{linktitle:!0}},[n("column-sort",{attrs:{sortdata:[{text:"商品名称",num:"25",key:"sName",class:"text-left"},{text:"数量",num:"15",key:"dSaleNumber",index:1},{text:"总售价",num:"15",key:"dTotleSalePrice"},{text:"实收",num:"15",key:"dPaidMoney"},{text:"总进价",num:"15",key:"dTotleBuyPrice"},{text:"盈利",num:"15",key:"dProfitMoney"}]},on:{sortchange:t.sortchange},slot:"title"}),t._v(" "),t._l(t.pageDataList,function(e,i){return n("list-item",{key:i,attrs:{checktype:"border",link:!0}},[n("router-link",{staticClass:"item-content",attrs:{to:{path:"admin_stock_single",query:{id:e.oProductID,name:e.sName}},tag:"div"}},[n("column",[n("column-item",{class:1==e.nStatus?"text-left":"text-line-through text-left",attrs:{num:"25"}},[n("icon",{attrs:{icon:t.$t("default.producttypeicons")[e.nType-1]}}),t._v(" "+t._s(e.sName)),1!=e.nStatus?n("span",{staticClass:"color-warning"},[t._v("(已删除)")]):t._e()],1),t._v(" "),n("column-item",{attrs:{num:"15"}},[n("div",{staticClass:"badge"},[t._v(t._s(t._f("decimal")(e.dSaleNumber)))])]),t._v(" "),n("column-item",{attrs:{num:"15"}},[n("span",{staticClass:"font05"},[t._v("￥")]),n("font",{staticClass:"font07"},[t._v(t._s(t._f("decimal")(e.dTotleSalePrice)))])],1),t._v(" "),n("column-item",{attrs:{num:"15"}},[n("span",{staticClass:"font05"},[t._v("￥")]),n("font",{staticClass:"font07"},[t._v(t._s(t._f("decimal")(e.dPaidMoney)))])],1),t._v(" "),n("column-item",{attrs:{num:"15"}},[n("span",{staticClass:"font05"},[t._v("￥")]),n("font",{staticClass:"font07"},[t._v(t._s(t._f("decimal")(e.dTotleBuyPrice)))])],1),t._v(" "),n("column-item",{attrs:{num:"15"}},[n("span",{staticClass:"font05"},[t._v("￥")]),n("font",{staticClass:"font07"},[t._v(t._s(t._f("decimal")(e.dProfitMoney)))])],1)],1)],1)],1)}),t._v(" "),n("paginate",{attrs:{data:t.rankorderList},on:{pagedata:t.pagedata},slot:"paginate"})],2)],1),t._v(" "),n("popup",{attrs:{show:t.searchshow,ispadding:!0,type:"modal",title:t.$t("default.filter"),"close-button-text":t.$t("default.close"),direction:"fade-center"},on:{closeLsn:t.searchPopClose}},[n("column",{staticClass:"deuce"},[n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"门店"}},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.ppshop,expression:"ppshop"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.ppshop=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"0"}},[t._v("全部门店")]),t._v(" "),t._l(t.shoplist,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.sName))])})],2)])],1)],1)],1),t._v(" "),n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"分类"}},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.ppcat,expression:"ppcat"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.ppcat=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"0"}},[t._v("全部分类")]),t._v(" "),t._l(t.categoryList,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.sName))])})],2)])],1)],1)],1),t._v(" "),n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"员工"}},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.ppuser,expression:"ppuser"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.ppuser=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"0"}},[t._v("全部员工")]),t._v(" "),t._l(t.userlist,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(null!=e.sName?e.sName:e.sEmail))])})],2)])],1)],1)],1),t._v(" "),n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"会员"}},[n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.ppmember,expression:"ppmember",modifiers:{number:!0}}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var n="_value"in e?e._value:e.value;return t._n(n)});t.ppmember=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"0"}},[t._v("全部会员")]),t._v(" "),t._l(t.memberlist,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.nPhone))])})],2)])],1)],1)],1),t._v(" "),n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"开始时间"}},[n("datetimer",{attrs:{time:t.ppstarttime,limit:[{type:"fromto",to:t.ppendtime}]},on:{changeLsn:t.ppstarttimechange}})],1)],1)],1)],1),t._v(" "),n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"截止时间"}},[n("datetimer",{attrs:{time:t.ppendtime,limit:[{type:"fromto",from:t.ppstarttime}]},on:{changeLsn:t.ppendtimechange}})],1)],1)],1)],1)],1),t._v(" "),n("br"),t._v(" "),n("column",{staticClass:"deuce"},[n("column-item",{attrs:{num:"50"}},[n("m-button",{attrs:{type:"danger"},nativeOn:{click:function(e){t.resetfilter()}}},[t._v("重置")])],1),t._v(" "),n("column-item",{attrs:{num:"50"}},[n("m-button",{nativeOn:{click:function(e){t.syncRankList()}}},[t._v("提交")])],1)],1)],1),t._v(" "),n("posts",{ref:"posts",on:{mounted:t.mountPost}})],1)},staticRenderFns:[]}},746:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(180),o=n(177),r=n(179),a=n(178),s=n(190),l=n(186),u=n(217),c=n(192),p=n(187),d=n(223),f=n(224);e.default={components:{"page-header":i.Header,"header-link":i.HeaderLink,"header-title":i.HeaderTitle,"page-content":r.Content,"m-button":a.Button,"page-footer":s.Footer,Icon:o.Icon,Posts:l.Posts,Paginate:u.Paginate,List:p.List,ListItem:p.ListItem,ListInput:p.ListInput,Column:c.Column,ColumnItem:c.ColumnItem,ColumnSort:c.ColumnSort,Datetimer:d.Datetimer,Popup:f.Popup},computed:{rankorderList:function(){return this.ranklist.keysort(this.sortkey,this.sortasc)}},data:function(){return{sortasc:!1,sortkey:"dSaleNumber",searchshow:!1,searchInput:"",ranklist:[],pageDataList:[],shoplist:[],categoryList:[],memberlist:[],userlist:[],ppshop:"0",ppcat:"0",ppmember:"0",ppuser:"0",ppstarttime:"2000-01-01 00:00",ppendtime:"2100-01-01 00:00"}},methods:{updateRoute:function(){this.syncRankList(),this.loadfromdb()},mountPost:function(){this.updateRoute()},pagedata:function(t){this.pageDataList=t},searchPopClose:function(t){this.searchshow=!1},ppstarttimechange:function(t){this.ppstarttime=t},ppendtimechange:function(t){this.ppendtime=t},sortchange:function(t){this.sortkey=t.key,this.sortasc=t.asc},resetfilter:function(){this.ppstarttime="2000-01-01 00:00",this.ppendtime="2100-01-01 00:00",this.ppshop="0",this.ppcat=0,this.ppmember=0,this.ppuser=0},loadfromdb:function(){var t=this;this.$WebStorage.then(function(e){e.select("shop").then(function(e){t.shoplist=e.rows}),e.select("category").then(function(e){t.categoryList=e.rows}),e.select("member").then(function(e){t.memberlist=e.rows}),e.select("user").then(function(e){t.userlist=e.rows})})},getProduct:function(t,e){for(var n in t)if(t[n].id==e)return t[n]},syncRankList:function(){var t=this,e={oShopID:this.ppshop,oCategoryID:this.ppcat,oMemberID:this.ppmember,oUserID:this.ppuser,nStartTime:this.$TimeUtils.formatDate(t.ppstarttime,"YYYY-MM-DD HH:mm").getTime(),nEndTime:this.$TimeUtils.formatDate(t.ppendtime,"YYYY-MM-DD HH:mm").getTime()};if(e.nStartTime>e.nEndTime)return void t.$refs.posts.toastError("开始时间不得大于截至时间！");t.$refs.posts&&t.$refs.posts.post(t.$Method.nSaleListRank,e).then(function(e){var n=e.arrData.list;t.$WebStorage.then(function(e){e.select("product").then(function(e){for(var i=e.rows,o=0;o<n.length;o++){var r=n[o];try{var a=t.getProduct(i,r.oProductID);n[o].nType=a.nType,n[o].nStatus=a.nStatus,n[o].sName=a.sName}catch(t){}}t.ranklist=n})}),t.searchshow=!1})}},activated:function(){document.title=this.$t("admin.productsalerank.title"),this.updateRoute()}}}});