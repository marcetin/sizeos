webpackJsonp([13],{176:function(t,e){t.exports=function(t,e,n,r,i){var o,a=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(o=t,a=t.default);var c="function"==typeof a?a.options:a;e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns),r&&(c._scopeId=r);var u;if(i?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=u):n&&(u=n),u){var l=c.functional,p=l?c.render:c.beforeCreate;l?c.render=function(t,e){return u.call(e),p(t,e)}:c.beforeCreate=p?[].concat(p,u):[u]}return{esModule:o,exports:a,options:c}}},177:function(t,e,n){var r=n(176)(n(184),null,null,null,null);t.exports=r.exports},178:function(t,e,n){var r=n(176)(n(185),null,null,null,null);t.exports=r.exports},179:function(t,e,n){var r=n(176)(n(182),null,null,null,null);t.exports=r.exports},180:function(t,e,n){var r=n(176)(n(183),null,null,null,null);t.exports=r.exports},182:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return n.e(93).then(function(){var e=[n(200)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Content:r}},183:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return n.e(10).then(function(){var e=[n(197)];t.apply(null,e)}.bind(this)).catch(n.oe)},i=function(t){return n.e(78).then(function(){var e=[n(201)];t.apply(null,e)}.bind(this)).catch(n.oe)},o=function(t){return n.e(6).then(function(){var e=[n(198)];t.apply(null,e)}.bind(this)).catch(n.oe)},a=function(t){return n.e(8).then(function(){var e=[n(199)];t.apply(null,e)}.bind(this)).catch(n.oe)},s=function(t){return n.e(84).then(function(){var e=[n(202)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Header:r,SecondHeader:i,HeaderLink:o,HeaderTitle:a,SimpleHeader:s,Title:a}},184:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return n.e(91).then(function(){var e=[n(203)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Icon:r}},185:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return n.e(77).then(function(){var e=[n(205)];t.apply(null,e)}.bind(this)).catch(n.oe)},i=function(t){return n.e(95).then(function(){var e=[n(206)];t.apply(null,e)}.bind(this)).catch(n.oe)},o=function(t){return n.e(70).then(function(){var e=[n(204)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Button:r,CDButton:i,ButtonGroup:o}},186:function(t,e,n){var r=n(176)(n(188),null,null,null,null);t.exports=r.exports},187:function(t,e,n){var r=n(176)(n(189),null,null,null,null);t.exports=r.exports},188:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return n.e(79).then(function(){var e=[n(207)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Posts:r}},189:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return n.e(76).then(function(){var e=[n(210)];t.apply(null,e)}.bind(this)).catch(n.oe)},i=function(t){return n.e(89).then(function(){var e=[n(209)];t.apply(null,e)}.bind(this)).catch(n.oe)},o=function(t){return n.e(90).then(function(){var e=[n(208)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={List:r,ListItem:i,ListInput:o}},190:function(t,e,n){var r=n(176)(n(191),null,null,null,null);t.exports=r.exports},191:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return n.e(80).then(function(){var e=[n(213)];t.apply(null,e)}.bind(this)).catch(n.oe)},i=function(t){return n.e(81).then(function(){var e=[n(215)];t.apply(null,e)}.bind(this)).catch(n.oe)},o=function(t){return n.e(96).then(function(){var e=[n(214)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Footer:r,SecondFooter:i,FooterItem:o,Item:o}},192:function(t,e,n){var r=n(176)(n(193),null,null,null,null);t.exports=r.exports},193:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return n.e(7).then(function(){var e=[n(211)];t.apply(null,e)}.bind(this)).catch(n.oe)},i=function(t){return n.e(9).then(function(){var e=[n(212)];t.apply(null,e)}.bind(this)).catch(n.oe)},o=function(t){return n.e(94).then(function(){var e=[n(216)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Column:r,ColumnItem:i,ColumnSort:o}},194:function(t,e){function n(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var o=r(i);return[n].concat(i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"})).concat([o]).join("\n")}return[n].join("\n")}function r(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r=n(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},195:function(t,e,n){function r(t){for(var e=0;e<t.length;e++){var n=t[e],r=l[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(o(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{for(var a=[],i=0;i<n.parts.length;i++)a.push(o(n.parts[i]));l[n.id]={id:n.id,refs:1,parts:a}}}}function i(){var t=document.createElement("style");return t.type="text/css",p.appendChild(t),t}function o(t){var e,n,r=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(r){if(f)return h;r.parentNode.removeChild(r)}if(v){var o=m++;r=d||(d=i()),e=a.bind(null,r,o,!1),n=a.bind(null,r,o,!0)}else r=i(),e=s.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}function a(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=g(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function s(t,e){var n=e.css,r=e.media,i=e.sourceMap;if(r&&t.setAttribute("media",r),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var c="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!c)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var u=n(196),l={},p=c&&(document.head||document.getElementsByTagName("head")[0]),d=null,m=0,f=!1,h=function(){},v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,n){f=n;var i=u(t,e);return r(i),function(e){for(var n=[],o=0;o<i.length;o++){var a=i[o],s=l[a.id];s.refs--,n.push(s)}e?(i=u(t,e),r(i)):i=[];for(var o=0;o<n.length;o++){var s=n[o];if(0===s.refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete l[s.id]}}}};var g=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},196:function(t,e){t.exports=function(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=o[0],s=o[1],c=o[2],u=o[3],l={id:t+":"+i,css:s,media:c,sourceMap:u};r[a]?r[a].parts.push(l):n.push(r[a]={id:a,parts:[l]})}return n}},221:function(t,e,n){var r=n(176)(n(222),null,null,null,null);t.exports=r.exports},222:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return n.e(72).then(function(){var e=[n(237)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Searchbar:r}},229:function(t,e,n){var r=n(176)(n(234),null,null,null,null);t.exports=r.exports},234:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return n.e(67).then(function(){var e=[n(245)];t.apply(null,e)}.bind(this)).catch(n.oe)},i=function(t){return n.e(59).then(function(){var e=[n(254)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Modal:r,Confirm:i}},246:function(t,e,n){var r=n(176)(n(249),null,null,null,null);t.exports=r.exports},249:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return n.e(65).then(function(){var e=[n(268)];t.apply(null,e)}.bind(this)).catch(n.oe)},i=function(t){return n.e(88).then(function(){var e=[n(269)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Tab:r,TabItem:i}},264:function(t,e,n){var r=n(176)(n(273),null,null,null,null);t.exports=r.exports},273:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return n.e(85).then(function(){var e=[n(287)];t.apply(null,e)}.bind(this)).catch(n.oe)},i=function(t){return n.e(92).then(function(){var e=[n(286)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Cropper:r,Cropbtn:i}},364:function(t,e,n){e=t.exports=n(194)(!1),e.push([t.i,".product_content{height:2rem;line-height:1rem}.product_content .product_title{font-size:.7rem;color:#3d4145}.product_content .product_title .icon{font-size:.8rem}.product_content .product_price{font-size:.7rem;color:red}",""])},411:function(t,e,n){function r(t){n(550)}var i=n(176)(n(744),n(492),r,null,null);t.exports=i.exports},492:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[n("page-header",{slot:"header"},[n("header-title",[t._v(t._s(t.$t("admin.productadd.title")))]),t._v(" "),n("header-link",{attrs:{isback:!0,left:!0}},[n("icon",{staticClass:"font08",attrs:{icon:"arrowleft"}}),t._v(t._s(t.$t("default.back")))],1)],1),t._v(" "),n("page-content",{attrs:{ispadding:!0}},[n("vue-form",{attrs:{state:t.vstate},on:{submit:function(e){e.preventDefault(),t.onSubmit()}}},[n("column",{attrs:{num:"100"}},[n("list",[n("column",{slot:"title"},[n("span",{staticClass:"pull-left"},[t._v("基本信息")]),t._v(" "),n("span",{staticClass:"color-warning tip pull-right"},[t._v("门店和类型一经确认，不得修改 "),n("icon",{attrs:{icon:"notice-fill"}})],1)])],1)],1),t._v(" "),n("column",{staticClass:"deuce"},[n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"门店",isdanger:!t.product.oShopID,tip:"门店不得为空"}},[t.product.oShopID?n("select",{directives:[{name:"model",rawName:"v-model",value:t.product.oShopID,expression:"product.oShopID"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.product.oShopID=e.target.multiple?n:n[0]}}},t._l(t.shopList,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.sName))])})):t._e()])],1)],1)],1),t._v(" "),n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"类型"}},[n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.product.nType,expression:"product.nType",modifiers:{number:!0}}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var n="_value"in e?e._value:e.value;return t._n(n)});t.product.nType=e.target.multiple?n:n[0]}}},t._l(t.$t("default.catetypes"),function(e,r){return n("option",{key:r,domProps:{value:r+1}},[t._v(t._s(e))])}))])],1)],1)],1),t._v(" "),n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"分类",isdanger:!t.hascat,tip:"分类不得为空！"}},[t.product.oCategoryID?n("select",{directives:[{name:"model",rawName:"v-model",value:t.product.oCategoryID,expression:"product.oCategoryID"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.product.oCategoryID=e.target.multiple?n:n[0]}}},t._l(t.categoryListFilter,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.sName))])})):t._e()])],1)],1)],1),t._v(" "),n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"名称",isdanger:t.vstate.ppname&&t.vstate.ppname.$invalid,tip:"名称不得为空"}},[n("validate",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.product.sName,expression:"product.sName"}],attrs:{name:"ppname",type:"text",placeholder:t.$t("admin.productsingle.plproductname"),required:""},domProps:{value:t.product.sName},on:{input:function(e){e.target.composing||(t.product.sName=e.target.value)}}})])],1)],1)],1)],1),t._v(" "),n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"售价",isdanger:t.vstate.ppsaleprice&&t.vstate.ppsaleprice.$invalid,tip:"售价必须为不小于会员价、0的数字"}},[n("validate",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.product.dSalePrice,expression:"product.dSalePrice"}],attrs:{name:"ppsaleprice",type:"text",placeholder:t.$t("admin.productsingle.plproductsaleprice"),required:"",pattern:"^\\d+(?:\\.\\d{1,2})?$",min:t.product.dMemberPrice},domProps:{value:t.product.dSalePrice},on:{input:function(e){e.target.composing||(t.product.dSalePrice=e.target.value)}}})])],1)],1)],1)],1),t._v(" "),n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"会员价",isdanger:t.vstate.ppmemberprice&&t.vstate.ppmemberprice.$invalid,tip:"会员价必须为不小于0且不大于售价的数字"}},[n("validate",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.product.dMemberPrice,expression:"product.dMemberPrice"}],attrs:{name:"ppmemberprice",type:"text",placeholder:t.$t("admin.productsingle.plproductmemberprice"),required:"",pattern:"^\\d+(?:\\.\\d{1,2})?$",max:t.product.dSalePrice},domProps:{value:t.product.dMemberPrice},on:{input:function(e){e.target.composing||(t.product.dMemberPrice=e.target.value)}}})])],1)],1)],1)],1),t._v(" "),n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"单位"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.product.sUnit,expression:"product.sUnit"}],staticStyle:{width:"2.5rem"},attrs:{name:"ppunit",type:"text",placeholder:t.$t("admin.productsingle.plproductunit")},domProps:{value:t.product.sUnit},on:{input:function(e){e.target.composing||(t.product.sUnit=e.target.value)}}})])],1)],1)],1),t._v(" "),n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"封面",tip:"封面不得为空"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.sCoverImage,expression:"sCoverImage"}],attrs:{name:"ppcoverimg",type:"text",placeholder:t.$t("admin.productsingle.plproductcoverimg")},domProps:{value:t.sCoverImage},on:{input:function(e){e.target.composing||(t.sCoverImage=e.target.value)}}}),t._v(" "),n("img",{staticStyle:{width:"4rem",height:"4rem"},attrs:{src:t.sCoverImage}}),t._v(" "),n("cropbtn",{on:{imageData:t.imageData}})],1)],1)],1)],1),t._v(" "),1==t.product.nType?n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"条码",isdanger:t.vstate.ppbarcode&&t.vstate.ppbarcode.$invalid,tip:"条码不得为空"}},[n("validate",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.product.sBarcode,expression:"product.sBarcode"}],attrs:{name:"ppbarcode",type:"text",placeholder:t.$t("admin.productsingle.plproductbarcode"),required:""},domProps:{value:t.product.sBarcode},on:{input:function(e){e.target.composing||(t.product.sBarcode=e.target.value)}}})])],1)],1)],1)],1):t._e()],1),t._v(" "),n("column",{staticClass:"deuce"},[3==t.product.nType?n("column-item",{attrs:{num:"100"}},[n("list",[n("column",{slot:"title"},[n("span",{staticClass:"pull-left"},[t._v("优惠商品列表")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.specialData.length<=0,expression:"specialData.length<=0"}],staticClass:"color-danger tip pull-right"},[t._v("请选择优惠商品 "),n("icon",{attrs:{icon:"notice-fill"}})],1)]),t._v(" "),n("div",{staticClass:"item-inner",staticStyle:{padding:"0 !important"}},[n("column-item",{staticStyle:{height:"10rem",width:"40%"},attrs:{num:"40"}},[n("list",{staticClass:"overscroll",attrs:{extrastyle:"border-right: 1px solid #e7e7e7"}},[n("column",{slot:"title"},[n("column-item",{attrs:{num:"40"}},[t._v("\n                              品名\n                              ")]),t._v(" "),n("column-item",{attrs:{num:"35"}},[t._v("\n                              数量\n                              ")]),t._v(" "),n("column-item",{attrs:{num:"25"}},[t._v("\n                              价格\n                              ")])],1),t._v(" "),t._l(t.specialData,function(e,r){return n("list-item",{key:r,staticClass:"leftdatalist2",attrs:{radio:!0,checktype:"border"}},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.leftchecked2,expression:"leftchecked2",modifiers:{number:!0}}],attrs:{type:"radio",name:"gender"},domProps:{value:r,checked:t._q(t.leftchecked2,t._n(r))},on:{__c:function(e){t.leftchecked2=t._n(r)}}}),t._v(" "),n("div",{staticClass:"item-content"},[n("column",[n("column-item",{attrs:{num:"40"}},[t._v("\n                                  "+t._s(e.sName)+"\n                                  ")]),t._v(" "),n("column-item",{attrs:{num:"35"}},[n("icon",{staticClass:"color-primary",attrs:{icon:"sub_circle"},nativeOn:{click:function(e){t.changeNumber(r)}}}),t._v(" "+t._s(t._f("decimal")(e.dFrequency))+" "),n("icon",{staticClass:"color-primary",attrs:{icon:"add_circle"},nativeOn:{click:function(e){t.changeNumber(r,!0)}}})],1),t._v(" "),n("column-item",{attrs:{num:"25"}},[n("span",{staticClass:"font05"},[t._v("￥")]),n("span",{staticClass:"font07"},[t._v(t._s(t._f("decimal")(e.dSalePrice)))])])],1)],1)])}),t._v(" "),n("column",{directives:[{name:"show",rawName:"v-show",value:t.specialData.length>0,expression:"specialData.length>0"}],slot:"append"},[n("column-item",{attrs:{num:"50"}},[n("m-button",{attrs:{type:"light",size:"mini"},nativeOn:{click:function(e){t.specialData=[]}}},[t._v("清空")])],1),t._v(" "),n("column-item",{attrs:{num:"25"}},[n("span",{staticStyle:{"font-weight":"700"}},[t._v(t._s(t._f("decimal")(t.totlesale2.num)))])]),t._v(" "),n("column-item",{staticStyle:{color:"red","text-aligh":"right"},attrs:{num:"25"}},[n("span",{staticClass:"font05"},[t._v("￥")]),t._v(t._s(t._f("decimal")(t.totlesale2.price))+"\n                              ")])],1),t._v(" "),n("div",{staticStyle:{height:"0px"},attrs:{id:"left-append-end2"}})],2)],1),t._v(" "),n("column-item",{attrs:{num:"60"}},[n("tab",{directives:[{name:"show",rawName:"v-show",value:""==t.searchInput2,expression:"searchInput2 ==''"}],attrs:{items:t.categoryListFilter,titleKey:"sName",active:t.categoryListIndex},on:{tabclick:t.tabclick}}),t._v(" "),n("tab",{directives:[{name:"show",rawName:"v-show",value:""!=t.searchInput2,expression:"searchInput2 !=''"}],attrs:{active:0,items:[{title:"搜索结果"}]}}),t._v(" "),n("column",{staticStyle:{overflow:"auto"}},t._l(t.productListFilter,function(e){return n("column-item",{key:t.p.id,staticStyle:{height:"6.5rem"},attrs:{grid:!0,num:"25"},nativeOn:{click:function(n){t.clickproduct2(e)}}},[n("img",{staticStyle:{width:"100%",height:"3rem",border:"1px solid #fefefe"},attrs:{src:e.sCoverImage}}),t._v(" "),n("div",{staticClass:"product_content"},[n("div",{staticClass:"product_title text-over"},[n("icon",{attrs:{icon:t.$t("default.producttypeicons")[e.nType-1]}}),t._v(t._s(e.sName)+"\n                              ")],1),t._v(" "),n("div",{staticClass:"product_price text-over"},[t._v("\n                              "+t._s(t._f("decimal")(e.dSalePrice))+"\n                              ")])])])}))],1)],1),t._v(" "),n("searchbar",{attrs:{input:t.searchInput2,"search-text":t.$t("admin.productsingle.searchText"),"cancel-text":t.$t("default.cancel")},on:{onchangelsn:t.searchInputLsn}})],1)],1):t._e()],1),t._v(" "),n("br"),t._v(" "),n("column",{staticClass:"deuce"},[n("column-item",{attrs:{num:"50"}},[n("m-button",{attrs:{type:"danger"},nativeOn:{click:function(e){t.goback()}}},[t._v("关闭")])],1),t._v(" "),n("column-item",{attrs:{num:"50"}},[n("m-button",{attrs:{disabled:3==t.product.nType&&t.specialData.length<=0||t.vstate.$invalid},nativeOn:{click:function(e){t.onSubmit()}}},[t._v("保存")])],1)],1)],1)],1),t._v(" "),n("cropper",{attrs:{show:t.showcrop,cropurl:t.cropurl},on:{closeLsn:t.cropClose,cropData:t.cropData}}),t._v(" "),n("confirm",{attrs:{show:t.showConfirm,title:t.$t("default.tiptitle"),content:t.ConfirmContent,cancelText:t.$t("default.cancel"),okText:t.$t("default.confirm")},on:{onOk:t.confirmOk,onCancel:t.confirmCancel}}),t._v(" "),n("posts",{ref:"posts",on:{mounted:t.mountPost}})],1)},staticRenderFns:[]}},550:function(t,e,n){var r=n(364);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(195)("0b979b65",r,!0)},744:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(180),i=n(177),o=n(179),a=n(178),s=n(190),c=n(186),u=n(192),l=n(246),p=n(187),d=n(221),m=n(229),f=n(264);e.default={components:{"page-header":r.Header,"header-link":r.HeaderLink,"header-title":r.HeaderTitle,"page-content":o.Content,"m-button":a.Button,"page-footer":s.Footer,Cropper:f.Cropper,Cropbtn:f.Cropbtn,Searchbar:d.Searchbar,Icon:i.Icon,Posts:c.Posts,List:p.List,ListItem:p.ListItem,ListInput:p.ListInput,Column:u.Column,ColumnItem:u.ColumnItem,Tab:l.Tab,Confirm:m.Confirm},data:function(){return{p:"",showConfirm:!1,ConfirmContent:"",vstate:{},showcrop:!1,categoryListIndex:0,leftchecked2:0,specialData:[],cropurl:"",sCoverImage:"",product:{},categoryList:[],productList:[],searchInput2:"",supplierList:[],resultProduct:{},shopList:[]}},computed:{totlesale2:function(){for(var t=0,e=0,n=0,r=0;r<this.specialData.length;r++){var i=this.specialData[r].dFrequency;t+=i,e+=this.specialData[r].dSalePrice*i,n+=this.specialData[r].dMemberPrice*i}return{memberprice:n,num:t,price:e}},productListFilter:function(){var t=this;return t.productList.filter(function(e){if(1!=e.nStatus)return!1;if(null!=e.oSpecialID&&"0"!=e.oSpecialID||3==e.nType)return!1;try{if(t.categoryListFilter[t.categoryListIndex].id!=e.oCategoryID)return!1}catch(t){return!1}return!t.searchInput2||t.$Pinyin.search(t.searchInput2,e.sName,[e.sBarcode,e.dSalePrice])})},hascat:function(){for(var t=this.categoryListFilter,e=0;e<t.length;e++)if(this.product.oCategoryID==t[e].id&&t[e].oShopID==this.product.oShopID)return!0;return t.length>0&&(this.product.oCategoryID||(this.product.oCategoryID=t[0].id),!0)},categoryListFilter:function(){var t=this,e=this;return this.categoryList.filter(function(n){return 1==n.nStatus&&(e.product.oCategoryID||(e.product.oCategoryID=n.id),n.oShopID==t.product.oShopID)})}},methods:{mountPost:function(){this.updateRoute()},confirmOk:function(){this.showConfirm=!1,this.$router.push({path:"admin_stock_add",query:{nProductType:this.resultProduct.nType,type:1,dNumber:this.resultProduct.dNumber,sUnit:this.resultProduct.sUnit,oProductID:this.resultProduct.id,sName:this.resultProduct.sName,dMemberPrice:this.resultProduct.dMemberPrice,dSalePrice:this.resultProduct.dSalePrice}})},confirmCancel:function(){this.showConfirm=!1,this.goback(!0)},searchInputLsn:function(t){this.searchInput2=t},tabclick:function(t){this.ontabclick(t)},imageData:function(t){this.cropurl=t,this.showcrop=!0},cropClose:function(){this.showcrop=!1},cropData:function(t){this.showcrop=!1,this.sCoverImage=t},goAddSupplier:function(){this.$router.push({path:"admin_supplier_add"})},goback:function(t){var e=this;t?setTimeout(function(){e.$router.back()},1e3):e.$router.back()},changeNumber:function(t,e){var n=this.specialData[t];if(n.dFrequency<=0||!e&&n.dFrequency<=1)return void this.$delete(this.specialData,t);e?n.dFrequency++:n.dFrequency--,this.$set(this.specialData,t,n)},clickproduct2:function(t){for(var e=0;e<this.specialData.length;e++){var n=this.specialData[e];if(n.id==t.id){var r={};for(var i in n)r[i]="dFrequency"==i?n[i]+1:n[i];return this.$set(this.specialData,e,r),void(this.leftchecked2=e)}}t.dFrequency=1,this.specialData.push(t),this.leftchecked2=this.specialData.length-1},ontabclick:function(t){if(!(t<0||t>=this.categoryListFilter.length))try{this.categoryListIndex=t}catch(t){}},loadfromdb:function(){var t=this;this.$WebStorage.then(function(e){e.select("category").then(function(e){t.categoryList=e.rows}),e.select("product").then(function(e){t.productList=e.rows}),e.select("shop").then(function(e){t.shopList=e.rows})})},onSubmit:function(){var t=this;if(t.$refs.posts&&this.vstate.$valid&&this.hascat){if(3==this.product.nType&&t.specialData.length<=0)return;t.$refs.posts.post(t.$Method.nProductAdd,{product:t.product,arrSpecial:t.specialData},!1,!0,{sCoverImage:encodeURIComponent(t.sCoverImage)}).then(function(e){t.resultProduct=e.arrData.tables.product.db[0],t.showConfirm=!0,t.ConfirmContent="商品添加成功，立即前往进货？"})}},syncData:function(){var t=this;t.$refs.posts&&t.$refs.posts.post(t.$Method.nCategoryList).then(function(e){t.$refs.posts.post(t.$Method.nShopList).then(function(e){t.$refs.posts.post(t.$Method.nProductList).then(function(e){t.$refs.posts.post(t.$Method.nSupplierList).then(function(e){try{t.supplierList=e.arrData.tables.supplier.db}catch(t){}try{t.product.oSupplierID=t.supplierList[0].id}catch(t){}t.loadfromdb()})})})})},updateRoute:function(){this.sCoverImage="",this.product={oShopID:this.$Cookie.get("cShopID",null),oCategoryID:this.$route.query.catid,nType:this.$route.query.type?this.$route.query.type:2,sUnit:"",dSalePrice:"",sCoverImage:"",dMemberPrice:"",dBuyPrice:"",sName:"",sBarcode:""},this.specialData=[],this.syncData()}},activated:function(){document.title=this.$t("admin.productadd.title"),this.updateRoute()},watch:{"product.oShopID":function(t){this.hascat}}}}});