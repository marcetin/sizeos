webpackJsonp([12],{176:function(t,e){t.exports=function(t,e,n,i,s){var a,o=t=t||{},r=typeof t.default;"object"!==r&&"function"!==r||(a=t,o=t.default);var c="function"==typeof o?o.options:o;e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns),i&&(c._scopeId=i);var l;if(s?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=l):n&&(l=n),l){var u=c.functional,h=u?c.render:c.beforeCreate;u?c.render=function(t,e){return l.call(e),h(t,e)}:c.beforeCreate=h?[].concat(h,l):[l]}return{esModule:a,exports:o,options:c}}},177:function(t,e,n){var i=n(176)(n(184),null,null,null,null);t.exports=i.exports},178:function(t,e,n){var i=n(176)(n(185),null,null,null,null);t.exports=i.exports},179:function(t,e,n){var i=n(176)(n(182),null,null,null,null);t.exports=i.exports},180:function(t,e,n){var i=n(176)(n(183),null,null,null,null);t.exports=i.exports},182:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(93).then(function(){var e=[n(200)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Content:i}},183:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(10).then(function(){var e=[n(197)];t.apply(null,e)}.bind(this)).catch(n.oe)},s=function(t){return n.e(78).then(function(){var e=[n(201)];t.apply(null,e)}.bind(this)).catch(n.oe)},a=function(t){return n.e(6).then(function(){var e=[n(198)];t.apply(null,e)}.bind(this)).catch(n.oe)},o=function(t){return n.e(8).then(function(){var e=[n(199)];t.apply(null,e)}.bind(this)).catch(n.oe)},r=function(t){return n.e(84).then(function(){var e=[n(202)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Header:i,SecondHeader:s,HeaderLink:a,HeaderTitle:o,SimpleHeader:r,Title:o}},184:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(91).then(function(){var e=[n(203)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Icon:i}},185:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(77).then(function(){var e=[n(205)];t.apply(null,e)}.bind(this)).catch(n.oe)},s=function(t){return n.e(95).then(function(){var e=[n(206)];t.apply(null,e)}.bind(this)).catch(n.oe)},a=function(t){return n.e(70).then(function(){var e=[n(204)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Button:i,CDButton:s,ButtonGroup:a}},186:function(t,e,n){var i=n(176)(n(188),null,null,null,null);t.exports=i.exports},187:function(t,e,n){var i=n(176)(n(189),null,null,null,null);t.exports=i.exports},188:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(79).then(function(){var e=[n(207)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Posts:i}},189:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(76).then(function(){var e=[n(210)];t.apply(null,e)}.bind(this)).catch(n.oe)},s=function(t){return n.e(89).then(function(){var e=[n(209)];t.apply(null,e)}.bind(this)).catch(n.oe)},a=function(t){return n.e(90).then(function(){var e=[n(208)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={List:i,ListItem:s,ListInput:a}},190:function(t,e,n){var i=n(176)(n(191),null,null,null,null);t.exports=i.exports},191:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(80).then(function(){var e=[n(213)];t.apply(null,e)}.bind(this)).catch(n.oe)},s=function(t){return n.e(81).then(function(){var e=[n(215)];t.apply(null,e)}.bind(this)).catch(n.oe)},a=function(t){return n.e(96).then(function(){var e=[n(214)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Footer:i,SecondFooter:s,FooterItem:a,Item:a}},192:function(t,e,n){var i=n(176)(n(193),null,null,null,null);t.exports=i.exports},193:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(7).then(function(){var e=[n(211)];t.apply(null,e)}.bind(this)).catch(n.oe)},s=function(t){return n.e(9).then(function(){var e=[n(212)];t.apply(null,e)}.bind(this)).catch(n.oe)},a=function(t){return n.e(94).then(function(){var e=[n(216)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Column:i,ColumnItem:s,ColumnSort:a}},194:function(t,e){function n(t,e){var n=t[1]||"",s=t[3];if(!s)return n;if(e&&"function"==typeof btoa){var a=i(s);return[n].concat(s.sources.map(function(t){return"/*# sourceURL="+s.sourceRoot+t+" */"})).concat([a]).join("\n")}return[n].join("\n")}function i(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=n(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},s=0;s<this.length;s++){var a=this[s][0];"number"==typeof a&&(i[a]=!0)}for(s=0;s<t.length;s++){var o=t[s];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},195:function(t,e,n){function i(t){for(var e=0;e<t.length;e++){var n=t[e],i=u[n.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](n.parts[s]);for(;s<n.parts.length;s++)i.parts.push(a(n.parts[s]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{for(var o=[],s=0;s<n.parts.length;s++)o.push(a(n.parts[s]));u[n.id]={id:n.id,refs:1,parts:o}}}}function s(){var t=document.createElement("style");return t.type="text/css",h.appendChild(t),t}function a(t){var e,n,i=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(i){if(p)return f;i.parentNode.removeChild(i)}if(v){var a=m++;i=d||(d=s()),e=o.bind(null,i,a,!1),n=o.bind(null,i,a,!0)}else i=s(),e=r.bind(null,i),n=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else n()}}function o(t,e,n,i){var s=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=_(e,s);else{var a=document.createTextNode(s),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}function r(t,e){var n=e.css,i=e.media,s=e.sourceMap;if(i&&t.setAttribute("media",i),s&&(n+="\n/*# sourceURL="+s.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var c="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!c)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var l=n(196),u={},h=c&&(document.head||document.getElementsByTagName("head")[0]),d=null,m=0,p=!1,f=function(){},v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,n){p=n;var s=l(t,e);return i(s),function(e){for(var n=[],a=0;a<s.length;a++){var o=s[a],r=u[o.id];r.refs--,n.push(r)}e?(s=l(t,e),i(s)):s=[];for(var a=0;a<n.length;a++){var r=n[a];if(0===r.refs){for(var c=0;c<r.parts.length;c++)r.parts[c]();delete u[r.id]}}}};var _=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},196:function(t,e){t.exports=function(t,e){for(var n=[],i={},s=0;s<e.length;s++){var a=e[s],o=a[0],r=a[1],c=a[2],l=a[3],u={id:t+":"+s,css:r,media:c,sourceMap:l};i[o]?i[o].parts.push(u):n.push(i[o]={id:o,parts:[u]})}return n}},217:function(t,e,n){var i=n(176)(n(218),null,null,null,null);t.exports=i.exports},218:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(71).then(function(){var e=[n(228)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Paginate:i}},221:function(t,e,n){var i=n(176)(n(222),null,null,null,null);t.exports=i.exports},222:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(72).then(function(){var e=[n(237)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Searchbar:i}},224:function(t,e,n){var i=n(176)(n(226),null,null,null,null);t.exports=i.exports},226:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(66).then(function(){var e=[n(241)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Popup:i}},229:function(t,e,n){var i=n(176)(n(234),null,null,null,null);t.exports=i.exports},234:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(67).then(function(){var e=[n(245)];t.apply(null,e)}.bind(this)).catch(n.oe)},s=function(t){return n.e(59).then(function(){var e=[n(254)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Modal:i,Confirm:s}},244:function(t,e,n){var i=n(176)(n(248),null,null,null,null);t.exports=i.exports},246:function(t,e,n){var i=n(176)(n(249),null,null,null,null);t.exports=i.exports},248:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(86).then(function(){var e=[n(267)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Settle:i}},249:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(65).then(function(){var e=[n(268)];t.apply(null,e)}.bind(this)).catch(n.oe)},s=function(t){return n.e(88).then(function(){var e=[n(269)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Tab:i,TabItem:s}},285:function(t,e,n){var i=n(176)(n(310),null,null,null,null);t.exports=i.exports},289:function(t,e,n){var i=n(176)(n(313),null,null,null,null);t.exports=i.exports},310:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(60).then(function(){var e=[n(316)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Updater:i}},313:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(73).then(function(){var e=[n(318)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Switcher:i}},354:function(t,e,n){e=t.exports=n(194)(!1),e.push([t.i,".product_content{height:2.5rem;line-height:1rem}",""])},393:function(t,e,n){var i=n(176)(n(722),null,null,null,null);t.exports=i.exports},436:function(t,e,n){function i(t){n(540)}var s=n(176)(n(769),n(467),i,null,null);t.exports=s.exports},467:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[n("page-header",[n("header-link",{attrs:{left:!0},nativeOn:{click:function(e){t.showaboutuspop=!0}}},[n("icon",{attrs:{icon:"rabbit"}}),t._v(t._s(t.$t("main.appname")))],1),t._v(" "),n("header-link",{attrs:{edge:!1}},[n("column",{staticClass:"bar-vertical"},t._l(t.topmenudata,function(e,i){return n("column-item",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"topmenu.show"}],key:i,staticClass:"link",staticStyle:{width:"2.5rem",height:"2.2rem"},attrs:{num:"20"},nativeOn:{click:function(e){t.clickTopMenu(i)}}},[n("router-link",{attrs:{to:e.url?e.url:""}},[n("icon",{staticStyle:{"line-height":"1.6rem"},attrs:{icon:e.icon}}),t._v(" "),n("label",{staticStyle:{"line-height":"0.2rem"}},[t._v(t._s(t.$t("main.topmenus["+i+"]")))])],1)],1)}))],1)],1),t._v(" "),n("page-footer",[n("column",[n("column-item",{staticClass:"link",attrs:{num:"10"},nativeOn:{click:function(e){t.takeOrder()}}},[n("icon",{attrs:{icon:"takeorder"}}),n("span",[t._v("取单")])],1),t._v(" "),n("column-item",{staticClass:"link",attrs:{num:"15"},nativeOn:{click:function(e){t.showPrinter()}}},[n("icon",{attrs:{icon:"printer"}}),n("span",[t._v("打印机")])],1),t._v(" "),n("column-item",{class:t.selectmember.id?"link color-primary":"link",attrs:{num:"15"}},[n("icon",{directives:[{name:"show",rawName:"v-show",value:t.selectmember.id,expression:"selectmember.id"}],staticClass:"color-danger",attrs:{icon:"error"},nativeOn:{click:function(e){t.selectmember={}}}}),t._v(" "),n("span",{on:{click:function(e){t.showVipList(!0)}}},[n("icon",{directives:[{name:"show",rawName:"v-show",value:!t.selectmember.id,expression:"!selectmember.id"}],attrs:{icon:"vipcard"}}),t._v(t._s(t.selectmember.id?t.selectmember.sSerial:"会员"))],1)],1),t._v(" "),n("column-item",{attrs:{num:"40"}},[n("searchbar",{ref:"refsearch",attrs:{input:t.searchInput,"search-text":t.$t("main.searchText"),"cancel-text":t.$t("default.cancel")},on:{mounted:t.mountSettleInput,onchangelsn:t.searchInputLsn}})],1),t._v(" "),t.showcount?n("column-item",{attrs:{num:"10"}},[n("m-button",{staticStyle:{width:"90%"},attrs:{disabled:t.settleData.length<=0,type:"warning",size:"mini"},nativeOn:{click:function(e){t.settleData.length<=0||t.showSettleSale(!0)}}},[t._v("扣次")])],1):t._e(),t._v(" "),n("column-item",{attrs:{num:t.showcount?"10":"20"}},[n("m-button",{staticStyle:{width:"90%"},attrs:{disabled:t.settleData.length<=0,type:"danger",size:"mini"},nativeOn:{click:function(e){t.settleData.length<=0||t.showSettleSale()}}},[t._v("结算")])],1)],1)],1),t._v(" "),n("page-content",{staticStyle:{overflow:"hidden"}},[n("column",[n("column-item",{attrs:{num:"40"}},[n("list",{staticClass:"overscroll",attrs:{extrastyle:"border-right: 1px solid #e7e7e7"}},[n("column",{slot:"title"},[n("column-item",{staticClass:"text-left",attrs:{num:"40"}},[t._v("\n                        品名\n                        ")]),t._v(" "),n("column-item",{attrs:{num:"35"}},[t._v("\n                        数量\n                        ")]),t._v(" "),n("column-item",{staticClass:"text-right",attrs:{num:"25"}},[n("span",{staticClass:"color-warning"},[t._v("vip")]),t._v("/"),n("span",{staticClass:"color-danger"},[t._v("售")])])],1),t._v(" "),t._l(t.settleData,function(e,i){return n("list-item",{key:i,staticClass:"settleDatalist",attrs:{radio:!0,hover:!1,checktype:"border"}},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.leftchecked,expression:"leftchecked",modifiers:{number:!0}}],attrs:{type:"radio",name:"settleDatagender"},domProps:{value:i,checked:t._q(t.leftchecked,t._n(i))},on:{__c:function(e){t.leftchecked=t._n(i)}}}),t._v(" "),n("div",{staticClass:"item-content"},[n("column",[n("column-item",{staticClass:"text-left",attrs:{num:"40"}},[n("icon",{attrs:{icon:t.$t("default.producttypeicons")[e.nType-1]}}),t._v(t._s(e.sName)+"\n                            ")],1),t._v(" "),n("column-item",{attrs:{num:"35"}},[n("icon",{staticClass:"color-primary",attrs:{icon:"sub_circle"},nativeOn:{click:function(e){t.changeNumber(i,!1)}}}),t._v(" "),n("span",{on:{click:function(n){t.changeMyNumber(i,1,e.dSaleNumber)}}},[t._v(t._s(t._f("decimal")(e.dSaleNumber)))]),t._v(" "),n("icon",{staticClass:"color-primary",attrs:{icon:"add_circle"},nativeOn:{click:function(e){t.changeNumber(i,!0)}}})],1),t._v(" "),n("column-item",{staticClass:"text-right",attrs:{num:"25"}},[n("span",{staticClass:"color-warning"},[t._v(t._s(t._f("decimal")(e.dMemberPrice)))]),t._v("/"),n("span",{staticClass:"color-danger"},[t._v(t._s(t._f("decimal")(e.dSalePrice)))])])],1)],1)])}),t._v(" "),n("column",{directives:[{name:"show",rawName:"v-show",value:t.settleData.length>0,expression:"settleData.length>0"}],slot:"append"},[n("column-item",{attrs:{num:"40"}},[n("m-button",{attrs:{type:"light",size:"mini"},nativeOn:{click:function(e){t.settleData=[]}}},[t._v("清空")]),t._v(" "),n("m-button",{attrs:{type:"warning",size:"mini"},nativeOn:{click:function(e){t.hangOrder()}}},[t._v("挂单")])],1),t._v(" "),n("column-item",{attrs:{num:"30"}},[n("span",{staticStyle:{"font-weight":"700"}},[t._v(t._s(t.totlesale.num))])]),t._v(" "),n("column-item",{staticClass:"text-right",attrs:{num:"30"}},[n("span",{staticClass:"color-warning"},[t._v(t._s(t._f("decimal")(t.totlesale.memberprice)))]),t._v("/"),n("span",{staticClass:"color-danger"},[t._v(t._s(t._f("decimal")(t.totlesale.price)))])])],1),t._v(" "),n("div",{staticStyle:{height:"0px"},attrs:{id:"left-append-end"}})],2)],1),t._v(" "),n("column-item",{attrs:{num:"60"}},[n("list",{staticClass:"overright",attrs:{extrastyle:"border-right: 1px solid #e7e7e7"}},[n("column",{slot:"title"},[n("tab",{directives:[{name:"show",rawName:"v-show",value:""==t.searchInput,expression:"searchInput ==''"}],attrs:{items:t.categoryListFilter,titleKey:"sName",active:t.categoryListIndex},on:{tabclick:t.tab_item_click}},[n("m-button",{staticStyle:{padding:"0px 1.3rem"},slot:"btnafter"}),t._v(" "),n("m-button",{staticClass:"link",staticStyle:{position:"absolute","z-index":"10",top:"0px",right:"0.25rem",width:"2.5rem","line-height":"1.5rem",height:"1.5rem",margin:"0.25rem 0"},attrs:{type:"light",round:!0},nativeOn:{click:function(e){t.addcat()}},slot:"tabafter"},[n("icon",{attrs:{icon:"add"}})],1)],1),t._v(" "),n("tab",{directives:[{name:"show",rawName:"v-show",value:""!=t.searchInput,expression:"searchInput !=''"}],attrs:{active:0,items:[{title:"搜索结果"}]}})],1),t._v(" "),n("column",[t._l(t.pageProductDataList,function(e,i){return n("column-item",{key:e.id,class:t.rightchecked==i?"active":"",staticStyle:{height:"6rem"},attrs:{grid:!0,num:"25"},nativeOn:{click:function(n){t.rightchecked=i,t.clickproduct(e)}}},[n("img",{staticStyle:{width:"100%",height:"3rem",border:"1px solid #fefefe"},attrs:{src:e.sCoverImage}}),t._v(" "),n("div",{staticClass:"product_content"},[n("div",{staticClass:"font07 color0 text-over text-left"},[n("icon",{staticClass:"font07",attrs:{icon:t.$t("default.producttypeicons")[e.nType-1]}}),t._v(t._s(e.sName)+"\n                            ")],1),t._v(" "),n("div",{staticClass:"text-over text-right font06"},[n("span",{staticClass:"pull-left color6"},[t._v(t._s(e.dNumber)+t._s(e.sUnit))]),t._v(" "),n("span",{staticClass:"color-danger"},[t._v("¥"+t._s(t._f("decimal")(e.dSalePrice)))])])])])}),t._v(" "),n("column-item",{staticStyle:{height:"6rem"},attrs:{grid:!0,num:"25"},nativeOn:{click:function(e){t.categoryList.length>0?t.addproduct():t.addcat()}}},[n("icon",{staticStyle:{"font-size":"2.5rem"},attrs:{icon:"add"}}),t._v(" "),n("div",{staticClass:"product_content"},[n("div",{staticClass:"font08"},[t._v("\n                              "+t._s(t.categoryList.length>0?"新建商品":"新建分类")+"\n                            ")])])],1)],2),t._v(" "),n("paginate",{attrs:{per:7,data:t.productListFilter},on:{pagedata:t.productpagedata},slot:"paginate"})],1)],1)],1)],1),t._v(" "),n("side-panel",{attrs:{show:t.showmenu,direction:"right"},on:{closeLsn:t.menu_close}},[n("div",{staticClass:"content-padded"},[n("list",{attrs:{hovertitle:!0,linktitle:!0}},[n("column",{staticStyle:{"text-align":"left !important"},nativeOn:{click:function(e){t.goShopSingle()}},slot:"title"},[n("icon",{attrs:{icon:"shop"}}),t._v(t._s(t.getShopName()))],1),t._v(" "),n("list-item",{attrs:{link:!0},nativeOn:{click:function(e){t.goUserSingle()}}},[n("div",{staticClass:"item-media"},[n("icon",{attrs:{icon:"usercenter"}})],1),t._v(" "),n("div",{staticClass:"item-content"},[n("div",{staticClass:"item-title-row"},[n("div",{staticClass:"item-title"},[t._v(t._s(t.accountName))])])])]),t._v(" "),t._l(t.paneldata,function(e,i){return n("list-item",{key:i},[e.show?n("div",{staticClass:"item-content",on:{click:function(e){t.clickpanel(i)}}},[n("div",{staticClass:"item-title-row"},[n("div",{staticClass:"item-title"},[t._v(t._s(t.$t("main.panels["+i+"]")))]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.num>0,expression:"panel.num>0"}],staticClass:"item-after"},[n("span",{staticClass:"badge"},[t._v(t._s(e.num))])])])]):t._e()])}),t._v(" "),n("list-item",[n("div",{staticClass:"item-content"},[n("div",{staticClass:"item-title"},[t._v("使用扣次功能")]),t._v(" "),n("div",{staticClass:"item-after"},[n("switcher",{attrs:{checked:t.showcount},on:{checkLsn:t.showcount_change}})],1)])]),t._v(" "),t.showcount?n("list-item",[n("div",{staticClass:"item-content"},[n("div",{staticClass:"item-title"},[t._v("快速刷卡扣次")]),t._v(" "),n("div",{staticClass:"item-after"},[n("switcher",{attrs:{checked:t.quickcount},on:{checkLsn:t.quickcount_change}})],1)])]):t._e()],2),t._v(" "),n("br"),t._v(" "),n("m-button",{nativeOn:{click:function(e){t.goshift()}}},[t._v("交接班")]),t._v(" "),n("br"),t._v(" "),n("m-button",{attrs:{type:"danger"},nativeOn:{click:function(e){t.logout()}}},[t._v("注销")])],1)]),t._v(" "),n("popup",{attrs:{show:t.printershow,ispadding:!0,type:"modal",title:t.$t("main.printertitle"),"close-button-text":t.$t("default.close"),direction:"fade-center"},on:{closeLsn:t.printer_pop_close}},[n("list",t._l(t.printerList,function(t,e){return n("list-item",{key:e,attrs:{checktype:"border"}},[n("div",{staticClass:"item-content"},[n("column")],1)])}))],1),t._v(" "),n("popup",{attrs:{show:t.abnormalCountShow,ispadding:!0,type:"modal",title:t.$t("main.abnormalcounttitle"),"close-button-text":t.$t("default.close"),direction:"fade-center"},on:{closeLsn:t.abnormalCount_pop_close}},[n("list",[n("column",{slot:"title"},[n("column-item",{staticClass:"text-left",attrs:{num:"20"}},[t._v("\n                  编号\n                ")]),t._v(" "),n("column-item",{staticClass:"text-left",attrs:{num:"40"}},[t._v("\n                  品名\n                ")]),t._v(" "),n("column-item",{staticClass:"text-right",attrs:{num:"20"}},[t._v("\n                  扣数\n                ")]),t._v(" "),n("column-item",{attrs:{num:"20"}},[t._v("\n                  结果\n                ")])],1),t._v(" "),t._l(t.abnormalCountList,function(e,i){return n("list-item",{key:i},[n("div",{staticClass:"item-content"},[n("column",[n("column-item",{staticClass:"text-left",attrs:{num:"20"}},[t._v("\n                      "+t._s(e.oProductID?e.oProductID:e.id)+"\n                    ")]),t._v(" "),n("column-item",{staticClass:"text-left",attrs:{num:"40"}},[t._v("\n                      "+t._s(e.sName)+"\n                    ")]),t._v(" "),n("column-item",{staticClass:"text-right",attrs:{num:"20"}},[n("div",{staticClass:"badge"},[t._v(t._s(t._f("decimal")(e.dSaleNumber)))])]),t._v(" "),n("column-item",{attrs:{num:"20"}},[n("icon",{attrs:{icon:e.success?"success":"error"}})],1)],1)],1)])})],2)],1),t._v(" "),n("popup",{attrs:{show:t.showHold,ispadding:!0,type:"modal",title:t.$t("main.holdtitle"),"left-button-text":t.$t("default.clear"),"close-button-text":t.$t("default.close"),direction:"fade-center"},on:{leftClick:t.clearHold,closeLsn:function(e){t.showHold=!1}}},[n("list",[n("column",{slot:"title"},[n("column-item",{staticClass:"text-left",attrs:{num:"20"}},[t._v("\n                  编号\n                ")]),t._v(" "),n("column-item",{staticClass:"text-left",attrs:{num:"40"}},[t._v("\n                  商品\n                ")]),t._v(" "),n("column-item",{staticClass:"text-right",attrs:{num:"20"}},[t._v("\n                  总数\n                ")]),t._v(" "),n("column-item",{staticClass:"text-right",attrs:{num:"20"}},[t._v("\n                  时间\n                ")])],1),t._v(" "),t._l(t.holdList,function(e,i){return n("list-item",{key:i,attrs:{link:!0},nativeOn:{click:function(n){t.selectHold(e.id,e.arrData)}}},[n("div",{staticClass:"item-content"},[n("column",[n("column-item",{staticClass:"text-left",attrs:{num:"20"}},[t._v("\n                      "+t._s(e.id)+"\n                    ")]),t._v(" "),n("column-item",{staticClass:"text-left",attrs:{num:"40"}},[t._v("\n                      "+t._s(e.sName)+"\n                    ")]),t._v(" "),n("column-item",{staticClass:"text-right",attrs:{num:"20"}},[n("div",{staticClass:"badge"},[t._v(t._s(t._f("decimal")(e.dTotleNumber)))])]),t._v(" "),n("column-item",{staticClass:"text-right",attrs:{num:"20"}},[t._v("\n                      "+t._s(t._f("from")(e.nAddTime))+"\n                    ")])],1)],1)])})],2)],1),t._v(" "),n("popup",{attrs:{show:t.membershow,ispadding:!0,type:"modal",title:t.$t("main.membertitle"),"left-button-text":t.$t("main.addmembertitle"),"close-button-text":t.$t("default.close"),direction:"fade-center"},on:{leftClick:t.showAddVip,closeLsn:t.member_pop_close}},[n("searchbar",{ref:"mymembersearchbar",attrs:{input:t.searchInput3,"search-text":t.$t("main.memberSearch"),"cancel-text":t.$t("default.cancel")},on:{keyenter:t.search_enter_lsn3,onchangelsn:t.search_input_lsn3}}),t._v(" "),n("list",[t._l(t.pageMemberDataList,function(e,i){return n("list-item",{key:i,attrs:{radio:!0,checktype:"icon",hover:!1}},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.memberchecked,expression:"memberchecked",modifiers:{number:!0}}],attrs:{type:"radio",name:"membergender"},domProps:{value:i,checked:t._q(t.memberchecked,t._n(i))},on:{__c:function(e){t.memberchecked=t._n(i)}}}),t._v(" "),n("div",{staticClass:"item-content"},[n("column",[n("column-item",{staticClass:"text-left",attrs:{num:"25"}},[t._v("\n                      "+t._s(e.sSerial)),n("br"),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.sTag&&e.sTag.length>0,expression:"p.sTag && p.sTag.length>0"}],staticClass:"font07 color-primary"},[t._v("("+t._s(e.sTag)+")")])]),t._v(" "),n("column-item",{staticClass:"text-left",attrs:{num:"25"}},[t._v("\n                      "+t._s(e.sName)),n("br"),t._v(" "),n("div",{staticClass:"badge"},[t._v(t._s(e.nPhone))])]),t._v(" "),n("column-item",{staticClass:"text-right",attrs:{num:"15"}},[n("span",{staticClass:"font05"},[t._v("￥")]),n("font",{staticClass:"font07"},[t._v(t._s(t._f("decimal")(e.dBalance)))]),n("br"),t._v(" "),n("m-button",{attrs:{size:"mini",type:"light"},nativeOn:{click:function(n){t.goRecharge(e,1)}}},[t._v("充值")]),n("br"),t._v(" "),n("m-button",{attrs:{size:"mini",type:"light"},nativeOn:{click:function(n){t.goRecharge(e,2)}}},[t._v("扣款")])],1),t._v(" "),t.showcount?n("column-item",{staticClass:"text-right",attrs:{num:"20"}},[n("m-button",{attrs:{size:"mini",type:"warning"},nativeOn:{click:function(n){t.showsalelist(e)}}},[t._v("计次列表")]),n("br"),t._v(" "),n("m-button",{attrs:{size:"mini",type:"success"},nativeOn:{click:function(n){t.showCountRecord(e)}}},[t._v("扣次记录")])],1):t._e(),t._v(" "),n("column-item",{staticClass:"text-right",attrs:{num:t.showcount?"15":"35"}},[n("m-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(n){t.goEditMember(e.id)}}},[t._v("编辑")]),n("br"),t._v(" "),n("m-button",{attrs:{size:"mini"},nativeOn:{click:function(n){t.memberSelected(e)}}},[t._v("选择")])],1)],1)],1)])}),t._v(" "),n("paginate",{attrs:{per:3,data:t.memberListFilter},on:{pagedata:t.memberpagedata},slot:"paginate"})],2)],1),t._v(" "),n("popup",{attrs:{show:t.quickcardshow,ispadding:!0,type:"modal",title:t.$t("main.quickcardtitle"),"close-button-text":t.$t("default.close"),direction:"fade-center"},on:{closeLsn:t.quickcard_pop_close}},[n("vue-form",{attrs:{state:t.quickcardstate},on:{submit:function(e){e.preventDefault(),t.onSubmitCountSale(!0,!0)}}},[n("list",[n("list-item",{attrs:{hover:!1}},[n("list-input",{attrs:{title:"会员卡号",isdanger:t.quickcardstate.quickcardserial&&t.quickcardstate.quickcardserial.$invalid,tip:"请输入完整会员卡号"},on:{clearLsn:function(e){t.quickcard,t.clear}}},[n("validate",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.quickcardserial,expression:"quickcardserial"}],ref:"quickcardinput",attrs:{name:"quickcardserial",type:"text",placeholder:t.$t("main.plquickcardserial"),required:"",minlength:"1"},domProps:{value:t.quickcardserial},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.onSubmitCountSale(!0,!0)},input:function(e){e.target.composing||(t.quickcardserial=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"item-after",slot:"button"},[n("m-button",{attrs:{disabled:t.quickcardstate.$invalid,size:"small"},nativeOn:{click:function(e){t.onSubmitCountSale(!0,!0)}}},[t._v("扣次")])],1)],1)],1)],1)],1)],1),t._v(" "),n("popup",{attrs:{show:t.countshow,type:"modal",ispadding:!0,title:t.$t("main.counttitle"),direction:"fade-center","close-button-text":t.$t("default.close")},on:{closeLsn:t.count_pop_close}},[n("searchbar",{attrs:{input:t.searchInput4,"search-text":t.$t("main.searchText4"),"cancel-text":t.$t("default.cancel")},on:{onchangelsn:t.search_input_lsn4}}),t._v(" "),n("list",[t._l(t.countfiltedList,function(e,i){return[n("list-item",{attrs:{link:!1}},[n("div",{staticClass:"item-content"},[n("column",[n("column-item",{staticClass:"text-left",attrs:{num:"50"}},[t._v("\n                      "+t._s(e.sName)+"\n                      "),n("div",{staticClass:"badge"},[t._v("×"+t._s(t._f("decimal")(-e.dSaleNumber)))])]),t._v(" "),n("column-item",{attrs:{num:"25"}},[n("span",{staticClass:"font05"},[t._v("单价：￥")]),n("font",{staticClass:"font07"},[t._v(t._s(t._f("decimal")(e.dMemberPrice)))]),t._v(" "),n("span",{staticClass:"font05"},[t._v("实收：￥")]),n("font",{staticClass:"font07"},[t._v(t._s(t._f("decimal")(e.dPaidMoney)))])],1),t._v(" "),n("column-item",{staticClass:"text-right",attrs:{num:"25"}},[n("m-button",{attrs:{size:"mini"},nativeOn:{click:function(n){t.showcountlist(e)}}},[t._v("扣次")])],1)],1)],1)]),t._v(" "),t._l(t.soncountlist(e.id),function(e,i){return n("list-item",{key:i,staticClass:"bg-modal color-warning"},[n("div",{staticClass:"item-content"},[n("column",[n("column-item",{staticClass:"text-left",style:e.bExit?"":"text-decoration:line-through",attrs:{num:"40"}},[t._v("\n                    "+t._s(e.sName)+" "),e.bExit?t._e():n("span",{staticClass:"color-warning"},[t._v("(已删除)")])]),t._v(" "),n("column-item",{staticClass:"text-right",attrs:{num:"40"}},[n("div",{staticClass:"badge color-white bg-danger"},[t._v("已用:"+t._s(t._f("decimal")(e.dTotleNumber-e.dSurplusNumber)))]),t._v(" "),n("div",{staticClass:"badge color-primary"},[t._v("剩余:"),n("b",[t._v(t._s(t._f("decimal")(e.dSurplusNumber)))])])])],1)],1)])})]})],2)],1),t._v(" "),n("popup",{attrs:{ispadding:!0,title:t.$t("main.aboutus"),direction:"top","close-button-text":t.$t("default.close"),show:t.showaboutuspop},on:{closeLsn:t.aboutusclose}},[n("h3",[t._v(t._s(t.$t("main.abouttip"))+" "+t._s(t.version))]),t._v(" "),n("span",{domProps:{innerHTML:t._s(t.$t("main.abouttext"))}}),t._v(" "),n("m-button",{directives:[{name:"show",rawName:"v-show",value:t.showupdate,expression:"showupdate"}],nativeOn:{click:function(e){t.checkUpdate()}}},[t._v(t._s(t.$t("default.update.checkupdate")))]),t._v(" "),n("br")],1),t._v(" "),n("settle",{attrs:{show:t.showSettle,selectmember:t.selectmember,memberprice:t.totlesale.memberprice,price:t.totlesale.price,title:t.$t("default.settle.title")},on:{closeLsn:t.settleclose,settleAccount:t.confirmSettle}}),t._v(" "),n("popup",{attrs:{show:t.showCountSettle,type:"modal",direction:"fade-center",title:t.$t("main.count_settle_title"),"close-button-text":t.$t("default.close")},on:{closeLsn:t.countsettleclose}},[n("page-content",{attrs:{ispadding:!0}},[n("column",{staticClass:"deuce"},[n("column-item",{attrs:{num:"100"}},[n("list",[n("column",{staticClass:"text-left",slot:"title"},[n("span",{staticClass:"pull-left"},[t._v(t._s(t.selectcountsale.sName?t.selectcountsale.sName:""))]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.countSettleData.length<=0,expression:"countSettleData.length<=0"}],staticClass:"color-danger tip pull-right"},[t._v("请选择计次商品 "),n("icon",{attrs:{icon:"notice-fill"}})],1)]),t._v(" "),n("div",{staticClass:"item-inner",staticStyle:{padding:"0 !important"}},[n("column-item",{staticStyle:{height:"10rem"},attrs:{num:"40"}},[n("list",{staticClass:"overscroll",attrs:{extrastyle:"border-right: 1px solid #e7e7e7"}},[n("column",{slot:"title"},[n("column-item",{attrs:{num:"75"}},[t._v("\n                              品名\n                              ")]),t._v(" "),n("column-item",{attrs:{num:"25"}},[t._v("\n                              数量\n                              ")])],1),t._v(" "),t._l(t.countSettleData,function(e,i){return n("list-item",{key:i,staticClass:"countsaleclass",attrs:{radio:!0,hover:!1,checktype:"border"}},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.countsalechecked,expression:"countsalechecked",modifiers:{number:!0}}],attrs:{type:"radio",name:"countsalegender"},domProps:{value:i,checked:t._q(t.countsalechecked,t._n(i))},on:{__c:function(e){t.countsalechecked=t._n(i)}}}),t._v(" "),n("div",{staticClass:"item-content"},[n("column",[n("column-item",{attrs:{num:"75"}},[t._v("\n                                  "+t._s(e.sName)+"\n                                  ")]),t._v(" "),n("column-item",{attrs:{num:"25"}},[n("icon",{staticClass:"color-primary",attrs:{icon:"sub_circle"},nativeOn:{click:function(e){t.changeNumber(i,!1,2)}}}),t._v(" "+t._s(e.dSurplusNumber>e.dSaleNumber?e.dSaleNumber:e.dSaleNumber=e.dSurplusNumber)+" "),n("icon",{staticClass:"color-primary",attrs:{icon:"add_circle"},nativeOn:{click:function(e){t.changeNumber(i,!0,2)}}})],1)],1)],1)])}),t._v(" "),n("column",{directives:[{name:"show",rawName:"v-show",value:t.countSettleData.length>0,expression:"countSettleData.length>0"}],slot:"append"},[n("column-item",{attrs:{num:"75"}},[n("m-button",{attrs:{type:"light",size:"mini"},nativeOn:{click:function(e){t.countSettleData=[]}}},[t._v("清空")])],1),t._v(" "),n("column-item",{attrs:{num:"25"}},[n("span",{staticStyle:{"font-weight":"700"}},[t._v(t._s(t.totlesale5.num))])])],1),t._v(" "),n("div",{staticStyle:{height:"0px"},attrs:{id:"left-append-end5"}})],2)],1),t._v(" "),n("column-item",{staticStyle:{height:"10rem"},attrs:{num:"60"}},[n("tab",{directives:[{name:"show",rawName:"v-show",value:""==t.searchInput5,expression:"searchInput5 ==''"}],attrs:{active:0,items:[{title:"全部分类"}]}}),t._v(" "),n("tab",{directives:[{name:"show",rawName:"v-show",value:""!=t.searchInput5,expression:"searchInput5 !=''"}],attrs:{active:0,items:[{title:"搜索结果"}]}}),t._v(" "),n("column",{staticStyle:{position:"absolute",top:"2rem",bottom:"0",width:"60%",overflow:"auto"}},t._l(t.countsaleList,function(e,i){return n("column-item",{key:i,staticStyle:{height:"6rem"},attrs:{grid:!0,num:"25"},nativeOn:{click:function(n){t.clickproduct5(e)}}},[n("img",{staticStyle:{width:"100%",height:"3rem",border:"1px solid #fefefe"},attrs:{src:e.sCoverImage}}),t._v(" "),n("div",{staticClass:"product_content"},[n("div",{staticClass:"font08 text-over",style:e.bExit?"":"text-decoration:line-through"},[t._v("\n                              "+t._s(e.sName)+"×"+t._s(e.dTotleNumber)+"\n                              ")]),t._v(" "),n("div",{staticClass:"font05 color-danger text-over"},[t._v("\n                              已用:"+t._s(e.dTotleNumber-e.dSurplusNumber)+" 剩余:"+t._s(e.dSurplusNumber)+"\n                              ")])])])}))],1)],1)],1)],1)],1),t._v(" "),n("column",{staticClass:"deuce"},[n("column-item",{attrs:{num:"40"}},[t._v("\n                 \n              ")]),t._v(" "),n("column-item",{attrs:{num:"40"}},[n("searchbar",{attrs:{input:t.searchInput5,"search-text":t.$t("main.searchText"),"cancel-text":t.$t("default.cancel")},on:{onchangelsn:t.searchInputLsn5}})],1),t._v(" "),n("column-item",{attrs:{num:"20"}},[n("div",{staticClass:"content-padded"},[n("m-button",{attrs:{type:"mini",disabled:t.countSettleData.length<=0},nativeOn:{click:function(e){t.countSettleData.length<=0||t.onSubmitCountSale(!1)}}},[t._v("扣除")])],1)])],1)],1)],1),t._v(" "),n("confirm",{attrs:{show:t.showConfirm,title:t.confirmTitle,okText:t.$t("default.confirm"),cancelText:t.$t("default.cancel")},on:{onOk:t.on_confirm_ok,onCancel:t.on_confirm_cancel}},[n("p",[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.cginput,expression:"cginput",modifiers:{number:!0}}],attrs:{type:"text"},domProps:{value:t.cginput},on:{input:function(e){e.target.composing||(t.cginput=t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),n("posts",{ref:"posts",on:{mounted:t.mountPost}}),t._v(" "),n("updater",{ref:"refupdate"})],1)},staticRenderFns:[]}},540:function(t,e,n){var i=n(354);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(195)("b764a672",i,!0)},722:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return n.e(82).then(function(){var e=[n(394)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={SidePanel:i}},769:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(82),s=function(t){return t&&t.__esModule?t:{default:t}}(i),a=n(180),o=n(192),r=n(179),c=n(229),l=n(190),u=n(177),h=n(221),d=n(393),m=n(187),p=n(178),f=n(224),v=n(246),_=n(48),b=n(186),g=n(285),y=n(289),k=n(217),w=n(244),C=n(84).version,S=n(81);e.default={components:{"page-header":a.Header,"header-link":a.HeaderLink,"header-title":a.HeaderTitle,"page-content":r.Content,"page-footer":l.Footer,Switcher:y.Switcher,Updater:g.Updater,SimpleHeader:a.SimpleHeader,SecondHeader:a.SecondHeader,SecondFooter:l.SecondFooter,FooterItem:l.FooterItem,Column:o.Column,ColumnItem:o.ColumnItem,Icon:u.Icon,"m-button":p.Button,Settle:w.Settle,Paginate:k.Paginate,Confirm:c.Confirm,Searchbar:h.Searchbar,SidePanel:d.SidePanel,List:m.List,ListItem:m.ListItem,ListInput:m.ListInput,Popup:f.Popup,Tab:v.Tab,TabItem:v.TabItem,Posts:b.Posts},activated:function(){document.title=this.$t("main.title"),this.updateRoute();var t=this,e=n(49),i=function(n){if(!(t.showHold||t.printershow||t.showmenu||t.membershow||t.countshow||t.showConfirm||t.showaboutuspop||t.showSuccess||t.showSettle||t.showCountSettle))switch(n.keyCode){case e.KEY_INSERT:t.clickproduct(t.productListFilter[t.rightchecked]);break;case e.KEY_DELETE:t.onsettleDataDelete(t.leftchecked);break;case e.KEY_HOME:t.ontabclick(t.categoryListIndex-1);break;case e.KEY_END:t.ontabclick(t.categoryListIndex+1);break;case e.KEY_UP:t.changeRightChecked(t.rightchecked-4);break;case e.KEY_DOWN:t.changeRightChecked(t.rightchecked+4);break;case e.KEY_LEFT:t.changeRightChecked(t.rightchecked-1);break;case e.KEY_RIGHT:t.changeRightChecked(t.rightchecked+1);break;case e.KEY_PAGE_UP:t.changeLeftChecked(t.leftchecked-1);break;case e.KEY_PAGE_DOWN:t.changeLeftChecked(t.leftchecked+1);break;case e.KEY_SHIFT:t.settleData.length>0?t.hangOrder():t.takeOrder()}};window.removeEventListener("keyup",i),window.addEventListener("keyup",i),this.version="V"+C},data:function(){return{vstate:{},holdList:[],showcount:this.$Cookie.getBoolean("b_show_count",!0),quickcount:this.$Cookie.getBoolean("b_quick_count",!1),quickcardserial:"",showHold:!1,showupdate:"web"!=S.os,isTime:!1,abnormalCountShow:!1,abnormalCountList:[],version:"",accountName:"",printerList:[],printershow:!1,showmenu:!1,membershow:!1,countshow:!1,quickcardshow:!1,quickcardstate:{},selectmember:{},countMember:{},memberList:[],salelist:[],countlist:[],selectcountsale:{},confirmTitle:"修改商品数量",showConfirm:!1,cgindex:0,cgtype:1,cginput:0,showaboutuspop:!1,showSettle:!1,showCountSettle:!1,paneldata:[{},{},{num:5},{}],topmenudata:[{icon:"table",show:!1},{icon:"reserve",show:!1},{icon:"takeout",show:!1},{icon:"download",show:!0},{icon:"admin",show:!0},{icon:"more",show:!0}],leftchecked:0,rightchecked:0,memberchecked:0,settleData:[],countSettleData:[],categoryList:[],productList:[],shopList:[],searchInput:"",searchInput3:"",searchInput4:"",searchInput5:"",categoryListIndex:0,pageMemberDataList:[],pageProductDataList:[]}},computed:{categoryListFilter:function(){var t=this;return this.categoryList.keysort("nSort",!1).filter(function(e){return 1==e.nStatus&&e.oShopID==t.$Cookie.get("cShopID")})},memberListFilter:function(){var t=this;return this.memberList.keysort("nUpdateTime",!0).filter(function(e){return t.selectmember.id&&t.selectmember.id==e.id&&(t.selectmember=e),1==e.nStatus&&(!t.searchInput3||t.$Pinyin.search(t.searchInput3,e.sName,[e.sTag,e.sSerial,e.nPhone]))})},shopfiltedList:function(){var t=this;return this.shopList.filter(function(e){return 1==e.nStatus&&e.id==t.$Cookie.get("cShopID")})},countfiltedList:function(){var t=this;return this.salelist.filter(function(e){return 1==e.nStatus&&(e.oMemberID==t.countMember.id&&(3==e.nProductType&&(!t.searchInput4||t.$Pinyin.search(t.searchInput4,e.sName,[e.sTag]))))})},totlesale:function(){return this.computeTotleSale(this.settleData)},totlesale5:function(){return this.computeTotleSale(this.countSettleData)},productListFilter:function(){return this.computerproduct(1)},countsaleList:function(){return this.computerproduct(5)}},methods:{memberpagedata:function(t){this.pageMemberDataList=t},productpagedata:function(t){this.pageProductDataList=t},mountSettleInput:function(){this.$refs.refsearch.focuson()},mountPost:function(){this.updateRoute()},member_pop_close:function(){this.membershow=!1},printer_pop_close:function(){this.printershow=!1},quickcount_change:function(t){this.quickcount=t,this.$Cookie.setBoolean("b_quick_count",t)},showcount_change:function(t){this.showcount=t,this.$Cookie.setBoolean("b_show_count",t)},abnormalCount_pop_close:function(){this.abnormalCountShow=!1},member_count_close:function(){this.countshow=!1},quickcard_pop_close:function(){this.quickcardshow=!1},menu_close:function(){this.showmenu=!1},aboutusclose:function(){this.showaboutuspop=!1},settleclose:function(){this.showSettle=!1},countsettleclose:function(){this.showCountSettle=!1},count_pop_close:function(){this.countshow=!1},tab_item_click:function(t){this.ontabclick(t)},searchInputLsn:function(t){this.searchInput=t},searchInputLsn5:function(t){this.searchInput5=t},search_input_lsn3:function(t){this.searchInput3=t},search_enter_lsn3:function(t){this.searchInput3=t,this.memberchecked=0,this.membershow&&this.onVipEnter()},search_input_lsn4:function(t){this.searchInput4=t},search_input_lsn5:function(t){this.searchInput5=t},on_confirm_cancel:function(){this.showConfirm=!1},on_confirm_ok:function(){try{this.showConfirm=!1;var t=1==this.cgtype?this.settleData:this.countSettleData;this.setSettleNumber(t,this.cgindex,this.cginput)}catch(t){}},onVipEnter:function(){if(null!=this.pageMemberDataList&&this.pageMemberDataList.length>0)try{this.memberSelected(this.pageMemberDataList[this.memberchecked])}catch(t){}},initData:function(){this.showmenu=!1,this.membershow=!1,this.countshow=!1,this.quickcardshow=!1,this.selectmember={},this.countMember={},this.settleData=[],this.categoryList=[]},checkUpdate:function(){var t=this;t.$refs.refupdate&&t.$refs.refupdate.checkUpdate()},updateRoute:function(){var t=this;if(t.$refs.posts){t.$refs.posts.showError=!1;if(null==this.$Cookie.get("cUserID")||null==this.$Cookie.get("cPwd"))return t.$refs.posts.toastError("请先登录"),void setTimeout(function(){t.$router.push({path:"login"})},1e3);this.accountName=this.$Cookie.get("cAccount"),this.syncData()}},changeMyNumber:function(t,e,n){this.cginput=n,this.showConfirm=!0,this.cgindex=t,this.cgtype=e||1},changeNumber:function(t,e,n){n=n||1;var i=1==n?this.settleData:this.countSettleData,s=i[t],a=s.dSaleNumber;e?a++:a--,this.setSettleNumber(i,t,a)},setSettleNumber:function(t,e,n){try{if(0==n)return void this.$delete(t,e);var i=t[e];i.dNumber<n&&(this.$refs.posts.toastError("库存不足！"),n=i.dNumber),i.dSaleNumber=n,this.$set(t,e,i)}catch(t){}},onsettleDataDelete:function(t){var e=this;this.$delete(e.settleData,e.leftchecked),e.leftchecked=e.settleData.length-1},changeRightChecked:function(t){t<0||t>=this.productListFilter.length||(this.rightchecked=t)},changeLeftChecked:function(t){t<0||t>=this.settleData.length||(this.leftchecked=t)},clickpanel:function(t){},computeTotleSale:function(t){for(var e=0,n=0,i=0,s=0;s<t.length;s++){var a=t[s].dSaleNumber;e+=a,n+=t[s].dSalePrice*a,i+=t[s].dMemberPrice*a}return{memberprice:i.toDecimal(2),num:e.toDecimal(2),price:n.toDecimal(2)}},computerproduct:function(t){var e,n,i=this;return 1==t?(e=i.searchInput,n=i.productList):5==t&&(e=i.searchInput5,n=i.countlist),n.filter(function(n){if(1!=n.nStatus)return!1;if(1==t){if(n.oShopID!=i.$Cookie.get("cShopID"))return!1;if(null!=n.oSpecialID&&"0"!=n.oSpecialID)return!1;try{if(i.categoryListFilter[i.categoryListIndex].id!=n.oCategoryID)return!1}catch(t){return!1}}else if(5==t){if(n.oSpecialID&&null!=n.oSpecialID&&"0"!=n.oSpecialID)return!1;if(n.oSaleListID!=i.selectcountsale.id)return!1;if(n.oMemberID!=i.selectcountsale.oMemberID)return!1}return!e||i.$Pinyin.search(e,n.sName,[n.sBarcode,n.dSalePrice])})},clearHold:function(){var t=this;this.$WebStorage.then(function(e){e.clearTable("hold").then(function(e){t.holdList=[],t.$refs.posts.toastSuccess("清空挂单成功！"),t.showHold=!1})})},selectHold:function(t,e){var n=this;this.$WebStorage.then(function(i){i.deleteByKey("hold",t).then(function(t){n.settleData=JSON.parse(e),n.showHold=!1})})},takeOrder:function(){var t=this;this.$WebStorage.then(function(e){e.select("hold").then(function(e){if(t.holdList=e.rows.keysort("id",!0),t.holdList.length<=0)return void t.$refs.posts.toastError("暂无挂单");t.showHold=!0})})},hangOrder:function(){var t=this;if(t.settleData.length>0){for(var e="",n=0;n<t.settleData.length&&(e+=t.settleData[n].sName+(n==t.settleData.length-1?"":"、"),!(e.length>15));n++);var i=[{nAddTime:(new Date).getTime(),sName:e,dTotleNumber:t.totlesale.num,sTip:"",arrData:(0,s.default)(t.settleData)}];t.$WebStorage.then(function(e){e.add("hold",i).then(function(){t.settleData=[],t.$refs.posts.toastSuccess("挂单成功！")},function(t){alert(t)})})}},goshift:function(){this.$router.push({path:"shift"})},soncountlist:function(t){for(var e=[],n=0;n<this.countlist.length;n++){var i=this.countlist[n];1==i.nStatus&&i.oSaleListID==t&&e.push(i)}return e},ontabclick:function(t){if(!(t<0||t>=this.categoryListFilter.length))try{this.rightchecked=0,this.categoryListIndex=t}catch(t){}},getProduct:function(t){for(var e in this.productList)if(this.productList[e].id==t)return this.productList[e]},onSubmitCountSale:function(t,e){try{var n=this,i={};if(t){if(e){if(quickcardstate.$invalid||n.quickcardserial.length<=1)return;i.sSerial=n.quickcardserial}else i.oMemberID=n.selectmember.id;i.productlist=n.settleData}else i.oMemberID=this.countMember.id,i.countlist=n.countSettleData;n.$refs.posts.post(n.$Method.nCountListSale,i,!0).then(function(e){t?n.SettleOver():(n.showCountSettle=!1,n.syncData()),n.handlerCountSale(e.arrData,t,!0)},function(e){n.handlerCountSale(e.arrData,t,!1)})}catch(t){}},memberSelected:function(t){this.membershow=!1,t&&(this.selectmember=t,this.isTime&&this.onSubmitCountSale(!0))},goShopSingle:function(){this.$router.push({path:"admin_shop_single",query:{id:this.$Cookie.get("cShopID")}})},goUserSingle:function(){this.$router.push({path:"admin_user_single",query:{id:this.$Cookie.get("cUserID")}})},goEditMember:function(t){this.$router.push({path:"admin_member_single",query:{id:t}})},goRecharge:function(t,e){this.$router.push({path:"admin_recharge_add",query:{oMemberID:t.id,dBalance:t.dBalance,type:e,sName:t.sName,nPhone:t.nPhone,sTag:t.sTag,sSerial:t.sSerial}})},showSettleSale:function(t){if(this.isTime=!!t,t)this.quickcount?this.showCountCard():this.selectmember.id?this.memberSelected(this.selectmember):this.showVipList(!0);else if(!this.selectmember.id)for(var e in this.settleData)if(3==this.settleData[e].nType)return this.$refs.posts.toastError("包含计次类商品必须先选择会员！"),void this.showVipList(!0);t||(this.showSettle=!0)},getShopName:function(){var t="toopos";try{t=this.shopfiltedList[0].sName}catch(t){}return t},confirmSettle:function(t){var e=this;t.nType=1,t.settleData=e.settleData,e.$refs.posts.post(e.$Method.nSaleRecordAdd,t,!0).then(function(t){var n;try{n=t.arrData.tables.member.db[0]}catch(t){}null!=_.Printer&&(new _.Printer).printReceipt(t.arrData.tables.salerecord.db[0],t.arrData.tables.salelist.db,n,e.getShopName()),e.showSettle=!1,e.SettleOver()})},syncData:function(){var t=this;t.$refs.posts&&t.$refs.posts.post(t.$Method.nCategoryList).then(function(e){t.$refs.posts.post(t.$Method.nProductList).then(function(e){t.$refs.posts.post(t.$Method.nShopList).then(function(e){t.showVipList(!1),t.loadfromdb()})})})},clickTopMenu:function(t){if(3==t)this.syncData();else if(4==t)this.$router.push({path:"admin"});else if(5==t){this.showmenu=!0;var e=this;e.$refs.posts.post(e.$Method.nShopList).then(function(t){e.loadfromdb()})}},clickproduct:function(t){if(t.dNumber<=0)return void this.$refs.posts.toastError("库存不足！");for(var e=0;e<this.settleData.length;e++){if(this.settleData[e].id==t.id)return this.changeNumber(e,!0,1),void(this.leftchecked=e)}t.dSaleNumber=1,this.settleData.push(t),this.leftchecked=this.settleData.length-1},clickproduct5:function(t){if(t.dSurplusNumber<=0)return void this.$refs.posts.toastError("该商品剩余次数已用尽！");for(var e=0;e<this.countSettleData.length;e++){var n=this.countSettleData[e];if(n.id==t.id){var i={};for(var s in n)i[s]="dSaleNumber"==s?n[s]+1:n[s];return this.$set(this.countSettleData,e,i),void(this.countsalechecked=e)}}t.dSaleNumber=1,this.countSettleData.push(t),this.countsalechecked=this.countSettleData.length-1},addcat:function(){this.$router.push({path:"admin_category_add"})},addproduct:function(){var t=this.categoryListFilter[this.categoryListIndex];this.$router.push({path:"admin_product_add",query:{catid:t.id,type:t.nType}})},SettleOver:function(){this.selectmember={},this.settleData=[],this.isTime=!1,this.quickcardshow=!1,this.syncData()},loadfromdb:function(){var t=this;this.$WebStorage.then(function(e){e.select("category").then(function(n){t.categoryList=n.rows,e.select("product").then(function(e){t.productList=e.rows})}),e.select("shop").then(function(e){t.shopList=e.rows})})},logout:function(){this.$Cookie.remove("cPwd"),this.$Cookie.remove("cUserID"),this.initData(),this.$router.push({path:"login"})},showAddVip:function(){this.$router.push({path:"admin_member_add"})},showCountCard:function(){var t=this;t.quickcardshow=!0,t.quickcardserial="",setTimeout(function(){t.$refs.quickcardinput.focus()},50)},showVipList:function(t){var e=this;e.$refs.posts.post(e.$Method.nMemberList,null,!1,t).then(function(n){e.$WebStorage.then(function(n){n.select("member").then(function(n){e.memberList=n.rows,t&&(e.membershow=!0,e.memberchecked=0,e.searchInput3="",setTimeout(function(){e.$refs.mymembersearchbar.focuson()},50))})})})},handlerCountSale:function(t,e,n){var i=this;try{if(n){var s=t.tables.member.db[0];e||i.showsalelist(s);for(var a=t.countgroupList,o=0;o<a.length;o++){var r="未知";try{r=i.getProduct(a[o].oProductID).sName}catch(t){}a[o].sName=r}null!=_.Printer&&(new _.Printer).printCountSale(t.tables.salerecord.db[0],t.tables.salelist.db,a,s,i.getShopName())}t.failed&&t.failed>0&&t.abnormalList&&null!=t.abnormalList&&(i.abnormalCountList=t.abnormalList,i.abnormalCountShow=!0)}catch(t){}},showCountRecord:function(t){this.$router.push({path:"admin_sale_record",query:{type:2,memberid:t.id}})},showsalelist:function(t){var e=this;e.countMember=t,e.$refs.posts.post(e.$Method.nSaleList,{nProductType:3}).then(function(t){e.countshow=!0,e.$WebStorage.then(function(t){e.loadCountList(function(){t.select("salelist").then(function(t){for(var n=t.rows,i=0;i<n.length;i++){var s=n[i],a=e.getProduct(s.oProductID);n[i].sName=a?a.sName:"未知"}e.salelist=n})})})})},loadCountList:function(t){var e=this;e.$refs.posts.post(e.$Method.nCountList).then(function(n){e.$WebStorage.then(function(t){t.select("countlist").then(function(t){for(var n=t.rows,i=0;i<n.length;i++){var s=n[i];try{var a=e.getProduct(s.oProductID);n[i].sName=a.sName,n[i].sCoverImage=a.sCoverImage,n[i].bExit=1==a.nStatus}catch(t){}}e.countlist=n})}),t&&t.call()})},showcountlist:function(t){var e=this;e.selectcountsale=t,e.loadCountList(function(){e.countSettleData=[],e.showCountSettle=!0})},showPrinter:function(){this.$refs.posts.toastError("敬请期待！")}},watch:{leftchecked:function(t,e){if(t!=e)try{document.getElementsByClassName("settleDatalist")[t].scrollIntoView()}catch(t){}},countsalechecked:function(t,e){if(t!=e)try{document.getElementsByClassName("countsaleclass")[t].scrollIntoView()}catch(t){console.log(t)}}}}}});