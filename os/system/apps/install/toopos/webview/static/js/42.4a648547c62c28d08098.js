webpackJsonp([42],{176:function(t,e){t.exports=function(t,e,n,o,u){var i,r=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(i=t,r=t.default);var l="function"==typeof r?r.options:r;e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns),o&&(l._scopeId=o);var a;if(u?(a=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(u)},l._ssrRegister=a):n&&(a=n),a){var c=l.functional,d=c?l.render:l.beforeCreate;c?l.render=function(t,e){return a.call(e),d(t,e)}:l.beforeCreate=d?[].concat(d,a):[a]}return{esModule:i,exports:r,options:l}}},177:function(t,e,n){var o=n(176)(n(184),null,null,null,null);t.exports=o.exports},178:function(t,e,n){var o=n(176)(n(185),null,null,null,null);t.exports=o.exports},179:function(t,e,n){var o=n(176)(n(182),null,null,null,null);t.exports=o.exports},180:function(t,e,n){var o=n(176)(n(183),null,null,null,null);t.exports=o.exports},182:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return n.e(93).then(function(){var e=[n(200)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Content:o}},183:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return n.e(10).then(function(){var e=[n(197)];t.apply(null,e)}.bind(this)).catch(n.oe)},u=function(t){return n.e(78).then(function(){var e=[n(201)];t.apply(null,e)}.bind(this)).catch(n.oe)},i=function(t){return n.e(6).then(function(){var e=[n(198)];t.apply(null,e)}.bind(this)).catch(n.oe)},r=function(t){return n.e(8).then(function(){var e=[n(199)];t.apply(null,e)}.bind(this)).catch(n.oe)},s=function(t){return n.e(84).then(function(){var e=[n(202)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Header:o,SecondHeader:u,HeaderLink:i,HeaderTitle:r,SimpleHeader:s,Title:r}},184:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return n.e(91).then(function(){var e=[n(203)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Icon:o}},185:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return n.e(77).then(function(){var e=[n(205)];t.apply(null,e)}.bind(this)).catch(n.oe)},u=function(t){return n.e(95).then(function(){var e=[n(206)];t.apply(null,e)}.bind(this)).catch(n.oe)},i=function(t){return n.e(70).then(function(){var e=[n(204)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Button:o,CDButton:u,ButtonGroup:i}},186:function(t,e,n){var o=n(176)(n(188),null,null,null,null);t.exports=o.exports},187:function(t,e,n){var o=n(176)(n(189),null,null,null,null);t.exports=o.exports},188:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return n.e(79).then(function(){var e=[n(207)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Posts:o}},189:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return n.e(76).then(function(){var e=[n(210)];t.apply(null,e)}.bind(this)).catch(n.oe)},u=function(t){return n.e(89).then(function(){var e=[n(209)];t.apply(null,e)}.bind(this)).catch(n.oe)},i=function(t){return n.e(90).then(function(){var e=[n(208)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={List:o,ListItem:u,ListInput:i}},190:function(t,e,n){var o=n(176)(n(191),null,null,null,null);t.exports=o.exports},191:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return n.e(80).then(function(){var e=[n(213)];t.apply(null,e)}.bind(this)).catch(n.oe)},u=function(t){return n.e(81).then(function(){var e=[n(215)];t.apply(null,e)}.bind(this)).catch(n.oe)},i=function(t){return n.e(96).then(function(){var e=[n(214)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Footer:o,SecondFooter:u,FooterItem:i,Item:i}},192:function(t,e,n){var o=n(176)(n(193),null,null,null,null);t.exports=o.exports},193:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return n.e(7).then(function(){var e=[n(211)];t.apply(null,e)}.bind(this)).catch(n.oe)},u=function(t){return n.e(9).then(function(){var e=[n(212)];t.apply(null,e)}.bind(this)).catch(n.oe)},i=function(t){return n.e(94).then(function(){var e=[n(216)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Column:o,ColumnItem:u,ColumnSort:i}},244:function(t,e,n){var o=n(176)(n(248),null,null,null,null);t.exports=o.exports},248:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return n.e(86).then(function(){var e=[n(267)];t.apply(null,e)}.bind(this)).catch(n.oe)};e.default={Settle:o}},425:function(t,e,n){var o=n(176)(n(758),n(462),null,null,null);t.exports=o.exports},462:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[n("page-header",{slot:"header"},[n("header-title",[t._v(t._s(t.$t("admin.stockadd.title")))]),t._v(" "),n("header-link",{attrs:{isback:!0,left:!0}},[n("icon",{staticClass:"font08",attrs:{icon:"arrowleft"}}),t._v(t._s(t.$t("default.back")))],1)],1),t._v(" "),n("page-content",{attrs:{ispadding:!0}},[n("vue-form",{attrs:{state:t.vstate},on:{submit:function(e){e.preventDefault(),t.onSubmit()}}},[n("column",{staticClass:"deuce"},[n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"品名"}},[t._v("\n                      "+t._s(t.stock.sName)+" "),n("span",{staticClass:"font06 color-danger"},[t._v("("+t._s(t._f("decimal")(t.stock.dNumber))+t._s(t.stock.sUnit)+")")])])],1)],1)],1),t._v(" "),n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"供应商",isdanger:!t.stock.oSupplierID,tip:"供应商不得为空"}},[t.stock.oSupplierID?n("select",{directives:[{name:"model",rawName:"v-model",value:t.stock.oSupplierID,expression:"stock.oSupplierID"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.stock.oSupplierID=e.target.multiple?n:n[0]}}},t._l(t.supplierList,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.sName))])})):t._e()])],1)],1)],1),t._v(" "),n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"类型",isdanger:!t.stock.nPurchase,tip:"类型不得为空"}},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.stock.nPurchase,expression:"stock.nPurchase"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.stock.nPurchase=e.target.multiple?n:n[0]}}},t._l(t.$t("default.purchasetypes"),function(e,o){return n("option",{key:o,domProps:{value:o+1}},[t._v(t._s(e))])}))])],1)],1)],1),t._v(" "),n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"总数量",isdanger:t.vstate.etaddnumber&&t.vstate.etaddnumber.$invalid,tip:"请输入数量"}},[n("validate",[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.stock.dBuyNumber,expression:"stock.dBuyNumber",modifiers:{number:!0}}],attrs:{name:"etaddnumber",type:"text",placeholder:t.$t("admin.stockadd.plnumber"),required:"",pattern:"^\\d+(?:\\.\\d{1,2})?$"},domProps:{value:t.stock.dBuyNumber},on:{input:function(e){e.target.composing||(t.stock.dBuyNumber=t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})])],1)],1)],1)],1),t._v(" "),3!=t.stock.nProductType?n("column-item",{attrs:{num:"50"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"总金额",isdanger:t.vstate.etaddmoney&&t.vstate.etaddmoney.$invalid,tip:"请输入总金额"}},[n("validate",[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.stock.dBuyMoney,expression:"stock.dBuyMoney",modifiers:{number:!0}}],attrs:{name:"etaddmoney",type:"text",placeholder:t.$t("admin.stockadd.plmoney"),required:"",pattern:"^\\d+(?:\\.\\d{1,2})?$"},domProps:{value:t.stock.dBuyMoney},on:{input:function(e){e.target.composing||(t.stock.dBuyMoney=t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})])],1)],1)],1)],1):t._e(),t._v(" "),n("column-item",{attrs:{num:"100"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"当前价格"}},[n("span",{staticClass:"font07"},[t._v("售价："+t._s(t._f("decimal")(t.stock.dSalePrice))+" 会员价："+t._s(t._f("decimal")(t.stock.dMemberPrice)))])])],1)],1)],1),t._v(" "),n("column-item",{attrs:{num:"100"}},[n("list",[n("list-item",[n("list-input",{attrs:{title:"预计盈利"}},[n("span",{staticClass:"font07"},[t._v("单进价："+t._s(t._f("decimal")(t.stock.dBuyMoney/t.stock.dBuyNumber))+" 单售价盈利："+t._s(t._f("decimal")(t.stock.dSalePrice-t.stock.dBuyMoney/t.stock.dBuyNumber))+" 单会员价盈利："+t._s(t._f("decimal")(t.stock.dMemberPrice-t.stock.dBuyMoney/t.stock.dBuyNumber)))])])],1)],1)],1)],1),t._v(" "),n("column",{staticClass:"deuce"},[n("column-item",{attrs:{num:"50"}},[n("m-button",{attrs:{type:"danger"},nativeOn:{click:function(e){t.goback()}}},[t._v("关闭")])],1),t._v(" "),n("column-item",{attrs:{num:"50"}},[n("m-button",{attrs:{disabled:t.vstate.$invalid},nativeOn:{click:function(e){t.onSubmit()}}},[t._v("保存")])],1)],1)],1)],1),t._v(" "),n("settle",{attrs:{show:t.showSettle,price:t.stock.dBuyMoney,title:t.$t("default.settle.title")},on:{closeLsn:t.settleclose,settleAccount:t.confirmSettle}}),t._v(" "),n("posts",{ref:"posts",on:{mounted:t.mountPost}})],1)},staticRenderFns:[]}},758:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(180),u=n(177),i=n(179),r=n(178),s=n(190),l=n(186),a=n(244),c=n(192),d=n(187);e.default={components:{"page-header":o.Header,"header-link":o.HeaderLink,"header-title":o.HeaderTitle,"page-content":i.Content,"m-button":r.Button,"page-footer":s.Footer,Icon:u.Icon,Posts:l.Posts,Settle:a.Settle,List:d.List,ListItem:d.ListItem,ListInput:d.ListInput,Column:c.Column,ColumnItem:c.ColumnItem},data:function(){return{vstate:{},supplierList:[],stock:{},showSettle:!1}},methods:{mountPost:function(){this.updateRoute()},settleclose:function(){this.showSettle=!1},confirmSettle:function(t){var e=this;t.settleData=e.stock,e.$refs.posts&&e.$refs.posts.post(e.$Method.nStockAdd,t,!0).then(function(t){e.showSettle=!1,e.goback(!0)})},goback:function(t){var e=this;t?setTimeout(function(){e.$router.back()},1e3):e.$router.back()},onSubmit:function(){var t=this;if(this.stock.oProductID&&this.stock.oSupplierID&&this.stock.nPurchase&&t.$refs.posts)return this.stock.dBuyNumber<=0?void t.$refs.posts.toastError("进/退货数量必须大于0！"):this.stock.dBuyMoney<0?void t.$refs.posts.toastError("进/退货金额不得小于0！"):2==this.stock.nPurchase&&this.stock.dNumber<this.stock.dBuyNumber?void t.$refs.posts.toastError("退货数量不得大于当前商品数量！"):void(this.vstate.$valid&&(t.stock.dBuyMoney>0?t.showSettle=!0:t.confirmSettle({accountData:null})))},updateRoute:function(){var t=this.$route.query;this.stock={dBuyNumber:"",nProductType:t.nProductType,dNumber:t.dNumber,sUnit:t.sUnit,oProductID:t.oProductID,dMemberPrice:t.dMemberPrice,dSalePrice:t.dSalePrice,sName:t.sName,nPurchase:t.type,oSupplierID:""},this.syncData()},syncData:function(){var t=this;t.$refs.posts.post(t.$Method.nSupplierList).then(function(e){t.supplierList=e.arrData.tables.supplier.db,t.stock.oSupplierID=t.supplierList[0].id})}},activated:function(){this.updateRoute()},created:function(){document.title=this.$t("admin.stockadd.title")}}}});